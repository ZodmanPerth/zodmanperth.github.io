<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta google-site-verification="WyLBDFVmaejbUqIefBev5CcMRFKKh9doT7LQhgWkBgM"><meta rating="safe for kids"><title>Measuring C# Performance with BenchmarkDotNet - Red Peregrine</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Red Peregrine"><meta name="msapplication-TileImage" content="/img/personal-blog/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Red Peregrine"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="I’m measuring optimal C# code implementations for a game engine I’m building."><meta property="og:type" content="article"><meta property="og:title" content="Measuring C# Performance with BenchmarkDotNet"><meta property="og:url" content="https://www.redperegrine.net/2017/12/10/measuring-csharp-perf-with-benchmarkdotnet/"><meta property="og:site_name" content="Red Peregrine"><meta property="og:description" content="I’m measuring optimal C# code implementations for a game engine I’m building."><meta property="og:locale" content="en_US"><meta property="og:image" content="https://www.redperegrine.net/2017/12/10/measuring-csharp-perf-with-benchmarkdotnet/tacho-420.jpg"><meta property="article:published_time" content="2017-12-23T09:12:47.000Z"><meta property="article:modified_time" content="2021-08-24T22:29:09.114Z"><meta property="article:author" content="Carl Scarlett"><meta property="article:tag" content="BenchmarkDotNet"><meta property="article:tag" content="LINQPad"><meta property="article:tag" content="C#"><meta property="article:tag" content="Win2d"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/2017/12/10/measuring-csharp-perf-with-benchmarkdotnet/tacho-420.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.redperegrine.net/2017/12/10/measuring-csharp-perf-with-benchmarkdotnet/"},"headline":"Measuring C# Performance with BenchmarkDotNet","image":["https://www.redperegrine.net/2017/12/10/measuring-csharp-perf-with-benchmarkdotnet/tacho-420.jpg"],"datePublished":"2017-12-23T09:12:47.000Z","dateModified":"2021-08-24T22:29:09.114Z","author":{"@type":"Person","name":"Carl Scarlett"},"publisher":{"@type":"Organization","name":"Red Peregrine","logo":{"@type":"ImageObject","url":"https://www.redperegrine.net/img/personal-blog/logo.svg"}},"description":"I’m measuring optimal C# code implementations for a game engine I’m building."}</script><link rel="canonical" href="https://www.redperegrine.net/2017/12/10/measuring-csharp-perf-with-benchmarkdotnet/"><link rel="icon" href="/img/personal-blog/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.0.1/styles/base16/oceanicnext.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Red%20Hat%20Display:wght@400;700&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/personal-blog/logo.svg" alt="Red Peregrine" height="56"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="Index" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-image"><span class="image"><img class="fill" src="/2017/12/10/measuring-csharp-perf-with-benchmarkdotnet/tacho-420.jpg" alt="Measuring C# Performance with BenchmarkDotNet"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2017-12-23T09:12:47.000Z" title="12/23/2017, 5:12:47 PM">2017-12-23</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-08-24T22:29:09.114Z" title="8/25/2021, 6:29:09 AM">2021-08-25</time></span><span class="level-item">19 minutes read (About 2899 words)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>&nbsp;visits</span></div></div><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><a class="link-muted" href="/categories/gamedev/">gamedev</a><span> / </span><a class="link-muted" href="/categories/gamedev/indiedev/">indiedev</a><span> / </span><a class="link-muted" href="/categories/zodproj/">zodproj</a><span> / </span><a class="link-muted" href="/categories/gamedev/indiedev/gameengine/">gameengine</a><span> / </span><a class="link-muted" href="/categories/tests/">tests</a><span> / </span><a class="link-muted" href="/categories/tests/performance/">performance</a></span></div></div><h1 class="title is-3 is-size-4-mobile">Measuring C# Performance with BenchmarkDotNet</h1><div class="content"><p>I’m measuring optimal C# code implementations for a game engine I’m building.</p>
<span id="more"></span>

<h1 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h1><p>I recently took on a “little side project” to pursue a lifelong dream: designing, creating (and releasing!) a computer game.  Though I’ve had the desire to do this for more than three and a half decades, I never <em>quite</em> got around to making a consistent, concerted effort.  It’s not because I’m lazy, I’ve just managed to pack a whole bunch of experiences into my life so far and, until recently, couldn’t find enough time to devote to the cause.</p>
<p>By “little side project” I’m being a sarcastic of course.  I knew when I started this journey that building a game is no trivial feat, and there would be unknown unknowns that would arise and need to be dealt with along the way.  That discovery was part of the exciting thing for me because I love learning new things.  However, because I <em>really</em> enjoy a challenge (and from the necessity of my circumstances), I made the decision to write the game engine as well; <em>from scratch</em>. </p>
<p>Fortunately I’d pursued life experiences that included all the ingredients I would need to pull off such a feat from both a creative and practical standpoint, including a lengthy career in software engineering and commercial experience in UX design.</p>
<p>I’ll explore the circumstances that drove those initial decisions another time.  Right now, it’s enough to know that the game engine is written in C# on UWP using Win2D, and targets Windows tablets and phones that have accelerometer sensors and touch screens.  The game is a top-down 2D space shoot ‘em up with a retro arcade look.</p>
<h1 id="Build-A-Game-Engine-in-C-…Are-You-Crazy"><a href="#Build-A-Game-Engine-in-C-…Are-You-Crazy" class="headerlink" title="Build A Game Engine in C#…Are You Crazy?"></a>Build A Game Engine in C#…Are You Crazy?</h1><p>When people talk of building game engines, C# and .NET aren’t terribly popular choices.  The .NET framework, while a much loved and carefully crafted platform, hasn’t exactly been built for the demands of a high-performing game engine in mind.  I don’t think my engine will be <em>too</em> demanding though, so using .NET is a feasible option.  Win2D is a powerful ally here, being a finely tuned wrapper over DirectX that <em>is</em> built for performance.  Win2D also provides a game-loop that gracefully handles the complexity of loop timing management, so that’s one less thing I needed to worry about.</p>
<p>This leaves the game engine “merely” doing some user input handling, physics, collision detections, game logic, and image rendering.  What could go wrong right? <span class="github-emoji"><span>😀</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f600.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>  As long as I build with the Garbage Collector in mind, and execute code in tight enough loops, I would hopefully get a smooth 60 frames per second across my target devices.  This is a nice engineering challenge that will keep me happily satisfying my inner geek for some time.</p>
<h1 id="Performance-Front-and-Centre"><a href="#Performance-Front-and-Centre" class="headerlink" title="Performance Front and Centre"></a>Performance Front and Centre</h1><p>I was <em>reasonably</em> sure I could make something decent with my technology choices, and a few test applications later I committed to the task ahead.  With a freshly read copy of Bob Nystrom’s amazing eBook <a target="_blank" rel="noopener" href="http://gameprogrammingpatterns.com/">Game Programming Patterns</a> up my sleeve, years of mentally constructed game systems and designs that were eager to escape my mind, and the skills I had nurtured over my career, I figured I had a decent shot at a solid result.</p>
<p>But confidence alone was never going to be enough.  Going into development of the engine I knew I would have to make every nanosecond count. While the architecture was wholly under my control and I trusted my skills, there was one concern that still hung heavy on my mind; <em>would the .NET Framework itself be performant enough?</em></p>
<p>There was only one way to know for sure; I was going to have to write performance tests for the framework itself.  And when you want to know the performance of .NET code I know of nothing more suited to the task than <a target="_blank" rel="noopener" href="https://github.com/dotnet/BenchmarkDotNet">BenchmarkDotNet</a>.</p>
<h1 id="BenchmarkDotNet-and-LINQPad"><a href="#BenchmarkDotNet-and-LINQPad" class="headerlink" title="BenchmarkDotNet and LINQPad"></a>BenchmarkDotNet and LINQPad</h1><p>I’m a heavy <a target="_blank" rel="noopener" href="https://www.linqpad.net/">LINQPad</a> user from way back.  Among other things, LINQPad enables me to test  hypotheses quickly away from the complexity of my larger code bases.  Once I’m happy, I move the validated code into the main codebase and do some manual integration tests.  This process works really well for me, so when I found myself needing to test different C# implementation patterns in isolation, LINQPad was a natural choice.</p>
<p>Fortunately for me my timing was just right; BenchmarkDotNet had just added support for running inside LINQPad, and LINQPad had just added support for hosting BenchmarkDotNet.  While the road since has been a little bumpy, the state of both tools was good enough to provide what I needed.</p>
<h1 id="Testing-Different-Iterator-Patterns-in-NET"><a href="#Testing-Different-Iterator-Patterns-in-NET" class="headerlink" title="Testing Different Iterator Patterns in .NET"></a>Testing Different Iterator Patterns in .NET</h1><p>I really enjoyed writing my own collision detection system; it’s the kind of challenge I relish.  My starting point was an excellent tutorial by Nilson Suoto called <a target="_blank" rel="noopener" href="https://www.toptal.com/game/video-game-physics-part-ii-collision-detection-for-solid-objects">Collision Detection for Solid Objects</a>, and after a lot of experimentation I had a really tight system.  I had a Sort and Sweep service using cheap AABB checks to find collections of objects with potential collisions (the broad phase), which were used to discover the actual collisions using Minkowski Sums and Convex Hulls of object geometries (the narrow phase).  We’re not covering the details of the implementation here, but you should know the narrow phase contains expensive CPU operations and I’ve spent an appropriate amount of time optimising the hell out of them.</p>
<p>Codewise, the Collision Detection system drives the Sort and Sweep service using an iterator pattern.  You probably know this pattern from implementing <code>IEnumerable&lt;T&gt;</code>; <code>GetEnumerator()</code> methods that <code>yield</code> appropriate results.  This is how I implemented it at first, and it made for some nice, readable code.</p>
<p>However, I had a hunch that this generic interface may not be the most performant way to drive the service, so I devised a plan to test different implementations of the iterator pattern to see if I could find time savings.  I also had concerns that the use of generics would add pressure to the .NET Garbage Collector, and as such I was interested in verifying this measuring memory aspects of each implementation as well.</p>
<h1 id="Initial-Benchmarks"><a href="#Initial-Benchmarks" class="headerlink" title="Initial Benchmarks"></a>Initial Benchmarks</h1><p>Switching to LINQPad, I wrote up a <code>Worker</code> class to simulate the Collision Detection system doing expensive work by summing the values yielded by a <code>Driver</code> class, which represented the Sort And Sweep service.  <code>Main()</code> simply called the benchmark runner to run with the <code>Worker</code> type.  I marked up the <code>Worker</code> with a <code>MemoryDiagnoser</code> to report on memory consumption, and because of my cross device intentions I thought it’s prudent to explore 32bit and 64bit generated code.</p>
<p>The code looked a little like this:</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">MemoryDiagnoser</span>]</span><br><span class="line">[<span class="meta">RyuJitX64Job, LegacyJitX86Job</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Worker</span></span><br><span class="line">{</span><br><span class="line">    [<span class="meta">Benchmark</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">NormalEnumerator</span>(<span class="params"></span>)</span></span><br><span class="line">    {</span><br><span class="line">        Driver driver = <span class="keyword">new</span> Driver();</span><br><span class="line">        <span class="built_in">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="built_in">int</span> i <span class="keyword">in</span> driver)</span><br><span class="line">        {</span><br><span class="line">            sum += i;</span><br><span class="line">            count++;</span><br><span class="line">        }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Driver</span> : <span class="title">IEnumerable</span>&lt;<span class="title">int</span>&gt;</span><br><span class="line">{</span><br><span class="line">  <span class="keyword">const</span> <span class="built_in">int</span> _size = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">int</span>[] _array;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Driver</span>(<span class="params"></span>)</span></span><br><span class="line">    {</span><br><span class="line">        _array = <span class="keyword">new</span> <span class="built_in">int</span>[_size];</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; _size; i++)</span><br><span class="line">            _array[i] = <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IEnumerator&lt;<span class="built_in">int</span>&gt; <span class="title">GetEnumerator</span>(<span class="params"></span>)</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; _size; i++)</span><br><span class="line">            <span class="keyword">yield</span> <span class="keyword">return</span> _array[i];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    IEnumerator IEnumerable.GetEnumerator()</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">return</span> GetEnumerator();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Main</span>(<span class="params"></span>)</span></span><br><span class="line">{</span><br><span class="line">    BenchmarkRunner.Run&lt;Worker&gt;();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>As well as the usual output appearing in LINQPad’s results window, running this produced a nice set of reports in various file formats in the subfolder <code>\BenchmarkDotNet.Artifacts\results</code> where LINQPad was executing.</p>
<article class="message message-immersive is-info zodnote">
      <div class="message-body">
        <span class="tag is-info mr-2">NOTE</span>
        You will probably need to run LINQPad as an admin to get it to work.
      </div>
    </article>
    

<p>Here’s an extract from a report running this code:</p>
<p><img src="table-1.png" alt="First Run"></p>
<p>From this I was able to reason a few things about a single implementation of an iterator pattern on a small sample size of 10 items.  This was a good start and served as proof that the concept of measuring performance in this way worked.</p>
<h1 id="Many-Rivers-to-Cross"><a href="#Many-Rivers-to-Cross" class="headerlink" title="Many Rivers to Cross"></a>Many Rivers to Cross</h1><p>Thinking ahead, I knew I had challenges to face.</p>
<p>First, an array size of 10 probably wasn’t representative of how big the object arrays would end up in my game.  I wasn’t sure how many objects I would need, but I knew performance rarely scales linearly.  I wanted to test the same implementations of iterator patterns on array sizes with various orders of magnitude.  Unfortunately BenchmarkDotNet didn’t support marking up benchmark methods with injectable parameters (array size in this case), so I had to roll my own solution.</p>
<p>Second, while I knew I could have different implementations inside a single <code>Worker</code>, I would need to be careful not to let the sharing of code scope compromise what I was measuring; the implementations could not affect one another.</p>
<p>Third, the way I simulated actual work in the implementations had to correctly represent code in my original code base that hadn’t been written yet!  Without attention to this detail it would be easy for my abstraction to stray from what would be reality, influencing the implementation and not representing a realistic scenario.</p>
<p>Fourth, the implementation code should be reasonably easy to read.  I would need to discover where the line was between performance and readability while I thought of innovative implementations.</p>
<p>Fifth, I wanted to explore iterators over different kinds of objects such as value types, reference types, and generic types.  The result would guide the object structure forming the basis of my collision detection system.</p>
<p>Finally, I wanted all these tests to run on a single execution run and roll into a single report table.  I figured I would use Excel for final analysis so it would be best if the results were automatically collected together so I didn’t have to do any manual amalgamations every time I completed a test run and wanted explored the results.</p>
<h1 id="The-Usual-Black-Box-Challenges"><a href="#The-Usual-Black-Box-Challenges" class="headerlink" title="The Usual Black-Box Challenges"></a>The Usual Black-Box Challenges</h1><p>I very quickly discovered that when I performed multiple tests over a single <code>Worker</code> type within the same run, the naming convention BenchmarkDotNet used to create the filenames would result in the overwrite of previous reports.  I created a helper class to create backups of report files on disk and track the generated file names.  I then added amalgamation of the final report using these backup files using <a target="_blank" rel="noopener" href="https://github.com/AngleSharp/AngleSharp">AngleSharp</a> (an open source HTML parser) to rip apart the tables in these files and create my own HTML report.</p>
<p>Along the way I also discovered that LINQPad’s <code>Dump()</code> methods weren’t available when BenchmarkDotNet was running, and would cause a terminating exception.  This hampered my ability to verify that iterator implementations were working properly (i.e. actually <em>iterating</em>), so I added a “runmode” state to the helper class that allowed me to switch between manual verification of code (where code is executed using LINQPad and not via BenchmarkDotNet) and producing the benchmark reports (where BenchmarkDotNet controlled the execution and not LINQPad).  The “runmode” also let me avoid throwing exceptions by isolating calls to <code>Dump()</code> behind conditional checks.</p>
<p>Finally, I created a state machine that looped through the various implementations, changing the size of the array each time.  The state of the machine was another addition to the helper class.  The report backup system hooked into this state to generate unique report names, which were used in turn to create the column values in the amalgamated report.</p>
<h1 id="Different-Implementations-to-Test"><a href="#Different-Implementations-to-Test" class="headerlink" title="Different Implementations to Test"></a>Different Implementations to Test</h1><p>I thought of 4 different iterator implementations to try out:</p>
<ol>
<li><strong>NormalEnumerator</strong><br>This was the <code>IEnumerable&lt;T&gt;</code> implementation I already had using <code>GetEnumerator()</code> methods and <code>yield</code> to return results at appropriate points.</li>
<li><strong>HandCrankedEnumerator</strong><br>This implementation is a POCO with <code>Reset()</code> and <code>MoveNext()</code> methods and an <code>EOF</code> property for controlling the loop.  Would removing a broad, generic implementation improve performance and reduce memory usage?</li>
<li><strong>HandCrankedWithMoveNextState</strong><br>This a variation of the previous implementation that eliminated the <code>EOF</code> and returned feedback from <code>Reset()</code> and <code>MoveNext()</code>.  This reduced the number of statements required to drive the iterator which I suspected would translate into better performance.</li>
<li><strong>ResultSetFullyCalculated</strong><br>This avoided iterating altogether, replacing it with a big synchronous operation calculating all the results in one pass and exposing a <code>Results</code> array.  Obviously this would have higher memory requirements, but would it perform better?</li>
</ol>
<article class="message message-immersive is-info zodnote">
      <div class="message-body">
        <span class="tag is-info mr-2">NOTE</span>
        My game engine runs on a single thread.  Multi-threaded concerns such as the timing of the read and write of values from different threads did not need to be considered.
      </div>
    </article>
    

<p>Here’s a gist containing a copy of the final LINQPad code:</p>
<div class="tex2jax_ignore asciimath2jax_ignore">
<script src="https://gist.github.com/ZodmanPerth/12711f70d8db12cf4af80ee7df7f641e.js"></script>
</div>

<h1 id="Amalgamated-Report"><a href="#Amalgamated-Report" class="headerlink" title="Amalgamated Report"></a>Amalgamated Report</h1><p>Once I was sure all the implementations were working correctly I switched on all the benchmarking options I wanted, plugged in some array sizes, and let it run.  On my Surface Pro with an i5 processor this took about 42 minutes, but was worth the wait because the data is rich and dense.</p>
<p>Here’s the amalgamated report from one such run.</p>
<p><img src="table-full.png" alt="Amalgamated Report"></p>
<p>If you’re used to the usual output columns BenchmarkDotNet produces you’ll recognise where I’ve inserted the other relevant data.  The <code>Type</code> and <code>Size</code> columns correspond to the type of Worker (<code>IntegerWorker</code> for value type tests, <code>ItemWorker</code> for reference type tests, and <code>GenericWorkder</code> for generic type tests), and the size of the array used to produce the result.  The other columns come straight from the BenchmarkDotNet reports.</p>
<h1 id="Analysing-with-Excel"><a href="#Analysing-with-Excel" class="headerlink" title="Analysing with Excel"></a>Analysing with Excel</h1><p>With all the data is in one place I wanted to use Excel’s analysis tools to help me compare the results and derive conclusions.  Copy and paste as text did the trick, though I did have to strip the alphabetical characters from the numeric columns and change their cell format to a number.  Once that was done I used a red-green colour scale conditional formatting on the numeric data to create a performance heat map, and used table filters and sorting to do the analysis.</p>
<p>Here’s the same amalgamated report formatted this way in Excel:</p>
<p><img src="1-full.png" alt="It's beginning to look a lot like Christmas"></p>
<p>Looking at the <code>Mean</code> column there was an obvious candidate for being too slow; the red cells.  Turns out the <code>NormalEnumerator</code> method (the implementation I was already using) was the worst performing, taking almost twice as long as the other methods.</p>
<p><img src="2-normalEnumerator.png" alt="Roxanne, you don't have to put on the red light"></p>
<p>I filtered that method out and dug deeper.</p>
<p><img src="3-withoutNormalEnumerator.png" alt="Mmmmm...lemon and lime"></p>
<p>When I looked at the fasted results in each <code>Size</code> group (those with the greenest <code>Mean</code> values), I could see that the <code>ResultSetFullyCalculated</code> method looked suspiciously slow. I checked each <code>ResultSetFullyCalculated</code> method against the other methods in the same <code>Size</code> group by eye and confirmed it; calculating the results in one hit was slower than flowing back and forth between the <code>Worker</code> and the <code>Driver</code>.</p>
<article class="message message-immersive is-success zodnote">
      <div class="message-body">
        <span class="tag is-success mr-2">ASIDE</span>
        This <em>was</em> a pleasant surprise.  I had expected a higher memory footprint and a lower execution time.  This kind of result is exactly why you need to validate early; it’s much cheaper to build things right the “first time” instead of trying to refactor once you’ve built a whole bunch of stuff on top of a false assumption.  I had a real Adam Savage moment with this finding.  Science!
      </div>
    </article>
    


<p>Let’s filter out the <code>ResultSetFullyCalculated</code> method and keep digging.</p>
<p><img src="4-withoutResultSetEnumerator.png" alt="Digging for gold...or in this case, green"></p>
<p>Now we get down to the pointy end of the analysis.  With only two methods remaining to compare against each other, there’s nothing much to do but check each pair individually.  The results are really close, and difficult to compare due to the variance in <code>Error</code> and <code>StdDev</code>.  However the <code>HandCrankedEnumerator</code> is marginally faster in almost every pair.  This was a bit of a surprise given I had assumed less statements in the caller would mean less execution time, but without checking the final generated code you can never be sure how such assumptions pan out.  The performance difference isn’t significant enough for me to take my investigation that far, so I’ll happily settle on the variant that’s easier to read, maintain, and is generally faster.</p>
<p><img src="5-finalResult.png" alt="Et voilà! The final result"></p>
<h1 id="How-Bad-is-Your-Memory"><a href="#How-Bad-is-Your-Memory" class="headerlink" title="How Bad is Your Memory?"></a>How Bad is Your Memory?</h1><p>Did you notice I haven’t talked at all about the memory usage by any of the implementations?  Well, throughout my analysis I was giving them the occasional, cursory glance.  The fact is, there wasn’t anything significant to worry about. There was only very small <code>Gen 0</code> in all implementations apart from <code>NormalEnumerator</code>, which was always the highest memory user in each group and always puts the most pressure on the Garbage Collector.  </p>
<p>The general rule of thumb I’ll be taking forward is that for balancing performance and memory concerns, always go with a POCO.  Of course, when it counts I’ll still be testing assumptions of course!</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>In the end, because of my findings, I refactored my Sort and Sweep service to be a POCO with <code>Reset()</code> and <code>MoveNext()</code> methods and an <code>EOF</code> property for controlling the loop as per the <code>HandCrankedEnumerator</code> test implementation.  It really didn’t take long to convert it over, and I now feel confident and satisfied that through my due diligence I’ve squeezed a little more performance out of a crucial game subsystem.</p>
<p>Onward and upward!</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Measuring C# Performance with BenchmarkDotNet</p><p><a href="https://www.redperegrine.net/2017/12/10/measuring-csharp-perf-with-benchmarkdotnet/">https://www.redperegrine.net/2017/12/10/measuring-csharp-perf-with-benchmarkdotnet/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Carl Scarlett</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2017-12-23</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2021-08-25</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/benchmarkdotnet/">BenchmarkDotNet</a><a class="link-muted mr-2" rel="tag" href="/tags/linqpad/">LINQPad</a><a class="link-muted mr-2" rel="tag" href="/tags/c/">C#</a><a class="link-muted mr-2" rel="tag" href="/tags/win2d/">Win2d</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2018/03/30/changing-everything/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Changes of a Cosmic Scale</span></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://www.redperegrine.net/2017/12/10/measuring-csharp-perf-with-benchmarkdotnet/';
            this.page.identifier = '2017/12/10/measuring-csharp-perf-with-benchmarkdotnet/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'http-www-redperegrine-net' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://www.gravatar.com/avatar/78e9bc2dd2c2726ff6cd3891fd9dd4bc?s=128" alt="Carl Scarlett"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Carl Scarlett</p><p class="is-size-6 is-block">Designer, Developer, Dreamer, Doer</p><p class="is-size-6 is-flex justify-content-center is-location"><i class="fas fa-map-marker-alt mr-1"></i><span>Perth, Western Australia</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">13</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">21</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">23</p></a></div></div></nav><div class="level"><a class="level-item button follow-button is-primary is-rounded" href="https://twitter.com/ZodmanPerth" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button link-button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ZodmanPerth"><i class="fab fa-github"></i></a><a class="level-item button link-button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/ZodmanPerth"><i class="fab fa-twitter"></i></a><a class="level-item button link-button is-transparent is-marginless" target="_blank" rel="noopener" title="LinkedIn" href="https://www.linkedin.com/in/carlscarlett/"><i class="fab fa-linkedin"></i></a><a class="level-item button link-button is-transparent is-marginless" target="_blank" rel="noopener" title="YouTube" href="https://www.youtube.com/user/ZodmanPerth"><i class="fab fa-youtube"></i></a><a class="level-item button link-button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Index</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Background"><span class="level-left"><span class="level-item">1</span><span class="level-item">Background</span></span></a></li><li><a class="level is-mobile" href="#Build-A-Game-Engine-in-C-…Are-You-Crazy"><span class="level-left"><span class="level-item">2</span><span class="level-item">Build A Game Engine in C#…Are You Crazy?</span></span></a></li><li><a class="level is-mobile" href="#Performance-Front-and-Centre"><span class="level-left"><span class="level-item">3</span><span class="level-item">Performance Front and Centre</span></span></a></li><li><a class="level is-mobile" href="#BenchmarkDotNet-and-LINQPad"><span class="level-left"><span class="level-item">4</span><span class="level-item">BenchmarkDotNet and LINQPad</span></span></a></li><li><a class="level is-mobile" href="#Testing-Different-Iterator-Patterns-in-NET"><span class="level-left"><span class="level-item">5</span><span class="level-item">Testing Different Iterator Patterns in .NET</span></span></a></li><li><a class="level is-mobile" href="#Initial-Benchmarks"><span class="level-left"><span class="level-item">6</span><span class="level-item">Initial Benchmarks</span></span></a></li><li><a class="level is-mobile" href="#Many-Rivers-to-Cross"><span class="level-left"><span class="level-item">7</span><span class="level-item">Many Rivers to Cross</span></span></a></li><li><a class="level is-mobile" href="#The-Usual-Black-Box-Challenges"><span class="level-left"><span class="level-item">8</span><span class="level-item">The Usual Black-Box Challenges</span></span></a></li><li><a class="level is-mobile" href="#Different-Implementations-to-Test"><span class="level-left"><span class="level-item">9</span><span class="level-item">Different Implementations to Test</span></span></a></li><li><a class="level is-mobile" href="#Amalgamated-Report"><span class="level-left"><span class="level-item">10</span><span class="level-item">Amalgamated Report</span></span></a></li><li><a class="level is-mobile" href="#Analysing-with-Excel"><span class="level-left"><span class="level-item">11</span><span class="level-item">Analysing with Excel</span></span></a></li><li><a class="level is-mobile" href="#How-Bad-is-Your-Memory"><span class="level-left"><span class="level-item">12</span><span class="level-item">How Bad is Your Memory?</span></span></a></li><li><a class="level is-mobile" href="#Summary"><span class="level-left"><span class="level-item">13</span><span class="level-item">Summary</span></span></a></li></ul></div></div><script src="/js/toc.js" defer></script></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><figure class="media-left"><a class="image" href="/2021/08/25/red-peregrine-2-0/"><img src="/2021/08/25/red-peregrine-2-0/thumb.jpg" alt="Red Peregrine 2.0"></a></figure><div class="media-content"><p class="date"><time dateTime="2021-08-24T23:35:28.000Z">2021-08-25</time></p><p class="title"><a href="/2021/08/25/red-peregrine-2-0/">Red Peregrine 2.0</a></p><p class="categories"><a href="/categories/zodproj/">zodproj</a> / <a href="/categories/hexo/">hexo</a> / <a href="/categories/hexo/icarus/">icarus</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2021/04/10/software-algorithms-for-k-combinations/"><img src="/2021/04/10/software-algorithms-for-k-combinations/thumb.jpg" alt="Software Algorithms for k-combinations"></a></figure><div class="media-content"><p class="date"><time dateTime="2021-04-09T23:42:02.000Z">2021-04-10</time></p><p class="title"><a href="/2021/04/10/software-algorithms-for-k-combinations/">Software Algorithms for k-combinations</a></p><p class="categories"><a href="/categories/zodproj/">zodproj</a> / <a href="/categories/tests/">tests</a> / <a href="/categories/tests/performance/">performance</a> / <a href="/categories/mathematics/">mathematics</a> / <a href="/categories/mathematics/k-combinations/">k-combinations</a> / <a href="/categories/algorithms/">algorithms</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2020/04/25/building-a-pause-menu-part-4/"><img src="/2020/04/25/building-a-pause-menu-part-4/palacio-80x80.jpg" alt="Building a Pause Menu - Part 4"></a></figure><div class="media-content"><p class="date"><time dateTime="2020-03-25T00:56:12.000Z">2020-03-25</time></p><p class="title"><a href="/2020/04/25/building-a-pause-menu-part-4/">Building a Pause Menu - Part 4</a></p><p class="categories"><a href="/categories/gamedev/">gamedev</a> / <a href="/categories/gamedev/indiedev/">indiedev</a> / <a href="/categories/godot/">godot</a> / <a href="/categories/zodproj/">zodproj</a> / <a href="/categories/series/">series</a> / <a href="/categories/series/pausemenu/">PauseMenu</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2020/03/15/building-a-pause-menu-part-3/"><img src="/2020/03/15/building-a-pause-menu-part-3/guillaume-840x420.jpg" alt="Building a Pause Menu - Part 3"></a></figure><div class="media-content"><p class="date"><time dateTime="2020-03-15T02:29:49.000Z">2020-03-15</time></p><p class="title"><a href="/2020/03/15/building-a-pause-menu-part-3/">Building a Pause Menu - Part 3</a></p><p class="categories"><a href="/categories/gamedev/">gamedev</a> / <a href="/categories/gamedev/indiedev/">indiedev</a> / <a href="/categories/godot/">godot</a> / <a href="/categories/zodproj/">zodproj</a> / <a href="/categories/series/">series</a> / <a href="/categories/series/pausemenu/">PauseMenu</a> / <a href="/categories/design/">design</a> / <a href="/categories/design/process/">process</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2019/12/27/building-a-pause-menu-part-2/"><img src="/2019/12/27/building-a-pause-menu-part-2/living-with-elephants-foundation-300x300.jpg" alt="Building a Pause Menu - Part 2"></a></figure><div class="media-content"><p class="date"><time dateTime="2019-12-27T08:17:50.000Z">2019-12-27</time></p><p class="title"><a href="/2019/12/27/building-a-pause-menu-part-2/">Building a Pause Menu - Part 2</a></p><p class="categories"><a href="/categories/gamedev/">gamedev</a> / <a href="/categories/gamedev/indiedev/">indiedev</a> / <a href="/categories/godot/">godot</a> / <a href="/categories/zodproj/">zodproj</a> / <a href="/categories/series/">series</a> / <a href="/categories/series/pausemenu/">PauseMenu</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">August 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">April 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">March 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/12/"><span class="level-start"><span class="level-item">December 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/11/"><span class="level-start"><span class="level-item">November 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/09/"><span class="level-start"><span class="level-item">September 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/08/"><span class="level-start"><span class="level-item">August 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/05/"><span class="level-start"><span class="level-item">May 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/03/"><span class="level-start"><span class="level-item">March 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/12/"><span class="level-start"><span class="level-item">December 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/algorithms/"><span class="level-start"><span class="level-item">algorithms</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/design/"><span class="level-start"><span class="level-item">design</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/design/process/"><span class="level-start"><span class="level-item">process</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/developer/"><span class="level-start"><span class="level-item">developer</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/developer/flow/"><span class="level-start"><span class="level-item">flow</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/developer/productivity/"><span class="level-start"><span class="level-item">productivity</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/gamedev/"><span class="level-start"><span class="level-item">gamedev</span></span><span class="level-end"><span class="level-item tag">10</span></span></a><ul><li><a class="level is-mobile" href="/categories/gamedev/gameengine/"><span class="level-start"><span class="level-item">gameengine</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/gamedev/indiedev/"><span class="level-start"><span class="level-item">indiedev</span></span><span class="level-end"><span class="level-item tag">9</span></span></a><ul><li><a class="level is-mobile" href="/categories/gamedev/indiedev/gameengine/"><span class="level-start"><span class="level-item">gameengine</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/godot/"><span class="level-start"><span class="level-item">godot</span></span><span class="level-end"><span class="level-item tag">8</span></span></a><ul><li><a class="level is-mobile" href="/categories/godot/gdscript/"><span class="level-start"><span class="level-item">gdscript</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/hexo/"><span class="level-start"><span class="level-item">hexo</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/hexo/icarus/"><span class="level-start"><span class="level-item">icarus</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/mathematics/"><span class="level-start"><span class="level-item">mathematics</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/mathematics/k-combinations/"><span class="level-start"><span class="level-item">k-combinations</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/series/"><span class="level-start"><span class="level-item">series</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/series/pausemenu/"><span class="level-start"><span class="level-item">PauseMenu</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/tests/"><span class="level-start"><span class="level-item">tests</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/tests/performance/"><span class="level-start"><span class="level-item">performance</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/zodproj/"><span class="level-start"><span class="level-item">zodproj</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/algorithms/"><span class="tag">Algorithms</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/benchmarkdotnet/"><span class="tag">BenchmarkDotNet</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/blog/"><span class="tag">Blog</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/c/"><span class="tag">C#</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/design/"><span class="tag">Design</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gdscript/"><span class="tag">GDScript</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gui/"><span class="tag">GUI</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/game-maker/"><span class="tag">Game Maker</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gameblog/"><span class="tag">GameBlog</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/github-gist/"><span class="tag">GitHub Gist</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/godot/"><span class="tag">Godot</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">Hexo</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/icarus/"><span class="tag">Icarus</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linqpad/"><span class="tag">LINQPad</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/msbuild/"><span class="tag">MSBuild</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mathematics/"><span class="tag">Mathematics</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/menu/"><span class="tag">Menu</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sensor/"><span class="tag">Sensor</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/uwp/"><span class="tag">UWP</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unity/"><span class="tag">Unity</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unreal/"><span class="tag">Unreal</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/visual-studio/"><span class="tag">Visual Studio</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/win2d/"><span class="tag">Win2d</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://godotengine.org/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Godot</span></span><span class="level-right"><span class="level-item tag">godotengine.org</span></span></a></li><li><a class="level is-mobile" href="https://github.com/Microsoft/Win2D" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Win2D</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li><li><a class="level is-mobile" href="https://github.com/dotnet/BenchmarkDotNet" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">BenchmarkDotNet</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li><li><a class="level is-mobile" href="https://www.linqpad.net/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">LINQPad</span></span><span class="level-right"><span class="level-item tag">www.linqpad.net</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/personal-blog/logo.svg" alt="Red Peregrine" height="28"></a><p class="is-size-7"><span>&copy; 2021 Carl Scarlett</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br>[<a href="https://github.com/ZodmanPerth/hexo-theme-icarus" target="_blank" rel="noopener">Modified</a> by Carl Scarlett]<br><span id="busuanzi_container_site_uv">Visited by <span id="busuanzi_value_site_uv">0</span> users</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="What are you looking for?"></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"What are you looking for?","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>