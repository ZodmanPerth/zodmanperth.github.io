<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta google-site-verification="WyLBDFVmaejbUqIefBev5CcMRFKKh9doT7LQhgWkBgM"><meta rating="safe for kids"><title>Software Algorithms for k-combinations - Red Peregrine</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Red Peregrine"><meta name="msapplication-TileImage" content="/img/personal-blog/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Red Peregrine"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Discovering and explaining the mathematics of k-combinations and how to create k-combination algorithms in any language.  I share my Rank and Unrank algorithms for k-combinations written in C#.  I per"><meta property="og:type" content="article"><meta property="og:title" content="Software Algorithms for k-combinations"><meta property="og:url" content="https://www.redperegrine.net/2021/04/10/software-algorithms-for-k-combinations/"><meta property="og:site_name" content="Red Peregrine"><meta property="og:description" content="Discovering and explaining the mathematics of k-combinations and how to create k-combination algorithms in any language.  I share my Rank and Unrank algorithms for k-combinations written in C#.  I per"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://www.redperegrine.net/2021/04/10/software-algorithms-for-k-combinations/header.jpg"><meta property="article:published_time" content="2021-04-09T23:42:02.000Z"><meta property="article:modified_time" content="2021-08-28T02:16:24.515Z"><meta property="article:author" content="Carl Scarlett"><meta property="article:tag" content="BenchmarkDotNet"><meta property="article:tag" content="Algorithms"><meta property="article:tag" content="Mathematics"><meta property="article:tag" content="GitHub Gist"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/2021/04/10/software-algorithms-for-k-combinations/header.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.redperegrine.net/2021/04/10/software-algorithms-for-k-combinations/"},"headline":"Software Algorithms for k-combinations","image":["https://www.redperegrine.net/2021/04/10/software-algorithms-for-k-combinations/header.jpg"],"datePublished":"2021-04-09T23:42:02.000Z","dateModified":"2021-08-28T02:16:24.515Z","author":{"@type":"Person","name":"Carl Scarlett"},"publisher":{"@type":"Organization","name":"Red Peregrine","logo":{"@type":"ImageObject","url":"https://www.redperegrine.net/img/personal-blog/logo.svg"}},"description":"Discovering and explaining the mathematics of k-combinations and how to create k-combination algorithms in any language.  I share my Rank and Unrank algorithms for k-combinations written in C#.  I per"}</script><link rel="canonical" href="https://www.redperegrine.net/2021/04/10/software-algorithms-for-k-combinations/"><link rel="icon" href="/img/personal-blog/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.0.1/styles/base16/oceanicnext.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Red%20Hat%20Display:wght@400;700&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/personal-blog/logo.svg" alt="Red Peregrine" height="56"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="Index" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-image"><span class="image"><img class="fill" src="/2021/04/10/software-algorithms-for-k-combinations/header.jpg" alt="Software Algorithms for k-combinations"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-04-09T23:42:02.000Z" title="4/10/2021, 7:42:02 AM">2021-04-10</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-08-28T02:16:24.515Z" title="8/28/2021, 10:16:24 AM">2021-08-28</time></span><span class="level-item">43 minutes read (About 6517 words)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>&nbsp;visits</span></div></div><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><a class="link-muted" href="/categories/zodproj/">zodproj</a><span>¬†/¬†</span><a class="link-muted" href="/categories/tests/">tests</a><span>¬†/¬†</span><a class="link-muted" href="/categories/tests/performance/">performance</a><span>¬†/¬†</span><a class="link-muted" href="/categories/mathematics/">mathematics</a><span>¬†/¬†</span><a class="link-muted" href="/categories/mathematics/k-combinations/">k-combinations</a><span>¬†/¬†</span><a class="link-muted" href="/categories/algorithms/">algorithms</a></span></div></div><h1 class="title is-3 is-size-4-mobile">Software Algorithms for k-combinations</h1><div class="content"><p>Interpreting the mathematics of k-combinations for computer programmers.</p>
<span id="more"></span>



      <a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-size:12px;line-height:1.2;display:inline-block;border-radius:3px" class="mt-3 mb-2" target="_blank" rel="noopener" href="https://unsplash.com/photos/ir5gC4hlqT0">
        <i class="fas fa-camera mr-2"></i><em>Crystal Pyramid Wallpaper</em> by Michael Dziedzic
      </a>
    

<br>
 

      <a style="background-color:#28a028;color:white;text-decoration:none;padding:4px 6px;font-size:12px;line-height:1.2;display:inline-block;border-radius:3px" class="mt-3 mb-2" href="#Introduction">
        <i class="fas fa-share fa-rotate-180 mr-2"></i>Skip Preface and Jump to the Post
      </a>
    


<div class="mb-3"></div> 

<article class="message message-immersive is-success zodnote">
      <div class="message-body">
        <span class="tag is-success mr-2">PREFACE</span>
        <br><br><p></p>
<p><em>It‚Äôs been a little over a year since my last post which may lead one to wonder if I had dropped off the face of the earth or merely given up.  Fortunately neither is even close to being true.</em></p>
<br>

<p><em>Unless you‚Äôre a Sleeping Beauty or Rip Van Winkle, you will have noticed 2020 was the year of COVID-19.  We‚Äôve been</em> extremely fortunate <em>here in Australia; we locked down early enough to eradicate most of the community spread.  We‚Äôve suffered only a little over 900 deaths so far which is in stark contrast to most other nations and the total world death count of over 2,887,000 people (figures correct at time of writing).</em></p>
<br>

<p><em>While Australians were virtually unaffected by the virus itself we were heavily affected in other ways.  Firstly, lockdowns played havoc to our supply chains.  Western Australia is the most isolated capital city in the world, and our supermarkets moved quickly to curb panic-buying by enforcing restrictions.  It worked eventually, but not before our supermarkets were stripped bare by fear-driven mobs before the restrictions could be put in place.  The lack of supply played havoc for my family, especially due to our soy- and rice-milk drinking ways (which were classified as ‚Äúlong-life milk‚Äù and restricted).  I would spend hours travelling across multiple neighborhoods each day, going shop to shop to gather enough food and supplies for our daily meals.  Fortunately we had no problems with toilet paper, which seemed to be a problem for many people.</em> üßª</p>
<br>

<p><em>My partner and I removed our kids from school early over health concerns, and a week later the government sent children home en masse.  Online learning was organised, but overworked teachers don‚Äôt have time to keep up with technology let alone move their entire syllabus to it, so the quality was unusable.  We couldn‚Äôt keep up with our kids questions about the incomprehensible instructions they were given while holding down our full time remote jobs.  The constant attention required to make it work was too demanding of our time and we were forced to abandon our children‚Äôs education altogether during this remainder of lockdown.</em></p>
<br>

<p><em>As most of Australia came out of lockdown and life found the new normal for most folks, my partner began suffering a debilitating medical issue and couldn‚Äôt get out of bed or move at all on her own.  I took up the additional responsibility of full-time carer for our children and for her.  Our public hospital system failed her utterly, refusing to provide a bed, adequate medical relief, or empathy from the agonising pain that wracked her body around the clock.  After weeks of broken sleep, mental anguish, and helplessness at being unable to relieve her constant cries of pain, we threw a haymaker and went to a private hospital.  Thankfully she</em> immediately <em>started getting the right treatment at last, putting her on track for multiple back surgeries to repair what turned out to be the worst bulging disc in anyone‚Äôs peacetime experience. She is still recovering but is finally doing okay.</em></p>
<br>

<p><em>During this period of caring for her, being a sole-parent, working full-time, and hour-long round-trips to the hospital far far away, my mental health started to break.  Now anyone who‚Äôs played cricket with or against me knows I am one mentally tough hombre, but after months of my unrelenting pressure my grey-matter said ‚Äúno‚Äù.  As luck would have it I had already organised a therapist for myself weeks earlier and right at my breaking point I had the help I needed on hand.</em></p>
<br>

<p><em>As a bonus we determined I suffer from <a target="_blank" rel="noopener" href="https://www.healthdirect.gov.au/complex-ptsd">CPTSD</a> caused by major childhood trauma.  This was actually a huge relief to me; it explained many life-long issues and forced me to direct some care on myself for a change.  Sure it meant living with the COVID-shitstorm of the present and unearthing unholy childhood trauma simultaneously, but y‚Äôall know I relish a challenge. At the end of this I‚Äôm going to be one goddamn unstoppable force of nature.</em></p>
<br>

<p><em>My partner appears to be recovering at long last, and I look forward to the day she‚Äôs fully recovered.  It‚Äôs been a long hard road for both of us.  Our kids have been resilient throughout this whole reign of fire and I believe its a testament to our amazing parenting skills.</em></p>
<br>

<p><em>Now my life is getting back on track I‚Äôve been reclaiming some spare time and dipping my toes into side projects once again.  I thought I was starting gently, but as you‚Äôll see the adventures just keep coming for me.</em> üòÅ</p>
<br>

<p><em>I look forward to my partner‚Äôs full recovery, the COVID vaccine to roll out and be a success</em> ü§û <em>, and to my recovery from a lifetime of undiagnosed mental trauma.</em>
      </p></div>
    </article>
    

<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Computer programmers, software engineers, software developers; no matter what we call ourselves, there are times where all of us find ourselves faced with some logic we know is a solved problem and reach out on the internet for the solution.  Most of the time that solution can be found by spending a few minutes on our favourite search engine.  We quickly gain knowledge of how the solution works, most often with code to help us understand the explanation.  We take the code offered, tinker with it to make it our own, and move on having learned something.</p>
<p>This was <em>not</em> the case for me recently when it came time to work with algorithms I needed for what mathematicians call k-combinations.  While I quickly found information about the <em>mathematics</em> of k-combinations, I found precious little about converting that mathematics in to code.</p>
<p>Having spent <em>weeks</em> of spare time working on a problem that I expected would only take a few minutes, and with <a target="_blank" rel="noopener" href="https://twitter.com/ZodmanPerth/status/1361973074652848132?s=20">encouragement from fellow engineers</a>,  I realised there was a hole in our online knowledge base about this important topic.  This post attempts to fill that void.</p>
<h1 id="How-it-Started"><a href="#How-it-Started" class="headerlink" title="How it Started"></a>How it Started</h1><p>25 years ago I wrote an application in Microsoft Excel to help me pick numbers for the national lottery.  In the mid 90‚Äôs when I wrote this app, the biggest (and only) lottery available in my  hometown city of Perth (Western Australia) was the Saturday Lottery Draw.  In this lottery, every game required you to pick 6 numbers from 45 numbers, and you could play as many games as you like every week for an increasing amount of cost.</p>
<p>Like any gambler worth their salt, I have my own superstitions when it comes to the selection of my numbers.  Here are mine:</p>
<ol>
<li>Make sure you play every number in the field at least once, across a minimal number of games</li>
<li>If you don‚Äôt win any prize in the weekly draw, replay the same numbers the following week</li>
<li>If you <em>do</em> win any prize in the weekly draw, regenerate a new set of numbers to play</li>
</ol>
<p>You don‚Äôt have to be a math genius to realise that to satisfy #1 you need to play a minimum of 45 √∑ 6 = 7.5 games.  I chose to play 12 games every week, so I could cover the field once, take the three numbers left over from game 8 with the left over from game 8 in a second field, and fill 4 more games with randomly selected games from that second field.</p>
<p>This was fairly simple to achieve with Excel VBA.  I wrote two columns of numbers from 1 to 45 (the two fields), shuffled the columns using VBA‚Äôs random number generator, then coloured each group of 6 (each game) with different colours.  I manually transfer my picks onto paper coupons and play them each week.</p>
<p><img src="excel-lotto-selector.png" alt="2 columns, 8 colours, 1 button - we're gonna be rich!"></p>
<p>25 years later I‚Äôm still waiting for that big win.  The gambler‚Äôs conspiracy voice in my head has been at me for decades to change my approach.  Being a vastly more seasoned programmer today than I was when I wrote that app, one day I decided to indulge my inner gambler and rewrite the app using my current technology stack (C# with a UWP front end).  You know, purely for scientific purposes ü§®.  It wouldn‚Äôt take long, right? ü§¶‚Äç‚ôÄÔ∏è</p>
<h1 id="New-Superstitions"><a href="#New-Superstitions" class="headerlink" title="New Superstitions"></a>New Superstitions</h1><p>Software engineers are very good at identifying patterns, and I am quite exceptional at it.  After decades of using my Excel App I‚Äôve noticed what appears to be the same groups of numbers appearing over and over.  The scientist in me theorises the 25+ year old VBA randomizer probably doesn‚Äôt have the <em>best</em> random distribution on the planet, so I wondered if the .NET randomizer would be any better.</p>
<p>It wasn‚Äôt hard to whip up some code in <a target="_blank" rel="noopener" href="https://www.linqpad.net/">LinqPad</a> to show the distribution, and sure enough it was terrible.  I toyed with the <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.rngcryptoserviceprovider">.NET Cryptogrphic Number Generator</a> and was equally dissatisfied.  I searched NuGet for a better alternative, and settled on <a target="_blank" rel="noopener" href="https://randn.dev/">RandN</a> which has a specific aim to improve the quality of the randomness.  Testing the distribution of the various generators RandN provides also left me dissatisfied.  Here‚Äôs a sample distribution over <span style="color: #89ad8e;"><em>100 million</em></span> generations of numbers between 1 and 45 using it‚Äôs <code>StandardRng</code> strategy:</p>
<p><img src="randn-distribution.png" alt="Not the flattest of random distributions"></p>
<article class="message message-immersive is-primary zodnote">
      <div class="message-body">
        <span class="tag is-primary mr-2">NOTE</span>
        While not lighting my world on fire with it‚Äôs random distribution, I do find RandN to be a solid random number generator.  I continue using it to provide random numbers for this project and recommend it over .NET‚Äôs built in randomizers.
      </div>
    </article>
    


<p>After some experimentation with generating lotto games randomly, and noticing certain combinations repeating too often for my liking, I resigned myself to the fact that simply using a random number generator was not going to be enough to satisfy my inner conspiracist.  I would need to do more work to guarantee I don‚Äôt play the same numbers more than once.</p>
<p>It should be obvious there will be a finite number of ways to choose 6 numbers from 45 numbers.  I figured if I precalculate every possible combination of 6, select my games randomly from this list, and store the combinations I have played, then I can guarantee I won‚Äôt be repeating games until I have depleted the entire list.  I need to do additional work to ensure I don‚Äôt choose combinations that violate superstition #1 above, but that‚Äôs the kind of algorithmic challenge that I love about writing code; I have faith in myself to resolve that.</p>
<p>I just need to generate that list right?</p>
<h1 id="Another-Numbers-Game"><a href="#Another-Numbers-Game" class="headerlink" title="Another Numbers Game"></a>Another Numbers Game</h1><p>To track the games I‚Äôve played I would be storing a large list of sequences of 6 numbers on disk, so I need to consider how much space that takes.  The worst case with minimal decoration will store all combinations of 45 choose 6, so how many combinations are there?</p>
<p>Mathematics has a field of study called <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Combinatorics">Combinatorics</a> that is devoted to counting systems of finite and infinite sets of numbers.  It doesn‚Äôt take much searching to discover that in the language of mathematics I‚Äôm asking the question ‚Äúhow many combinations are there of <em>n choose k</em>?‚Äù.  This is a solved problem in mathematics; the <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Combination#Number_of_k-combinations">number of k-combinations</a> is the count of the finite set of unique ways to choose <em>k combinations</em> from <em>n</em> things.  From there it‚Äôs easy to find the formula for the <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Binomial_coefficient">Binomial Coefficient</a> which is used to calculate the count of <em>n choose k</em>.</p>
<p>$$<br>\bigg(<br>\vcenter{n \atop k}<br>\bigg)<br>$$</p>
<p class="has-text-centered is-size-6 caption" style="color:#7a7a7a;margin-top:0.3em">How to write <em>n choose k</em> in mathematics</p>


<p>I won‚Äôt go into the math just yet, but using this formula I found the number of combinations I would need to store is <span style="color: #89ad8e;">8,145,060</span>.  That‚Äôs a big number!  If I store all 6 numbers of each combination as a 12 digit string with no separator, this results in a file size of over 85MB!  That‚Äôs an excessive amount of data for someone who grew up in the 8 bit era, and I simply couldn‚Äôt find peace until I found a better storage mechanism.</p>
<h1 id="Can-You-Smell-What-The-Math-Is-Cooking"><a href="#Can-You-Smell-What-The-Math-Is-Cooking" class="headerlink" title="Can You Smell What The Math Is Cooking?"></a>Can You Smell What The Math Is Cooking?</h1><p>One tool computer scientists use to identify entries in a consistently repeatable sequence of data (such as my list of all possible sequences) is an <em>index</em>.  I can just number each entry in my list of all possible games with an integer from 1 to 8,145,060 as long as I can generate the same sequence every time I need.  If I store each index on it‚Äôs own line in the file, that gives me a maximum file size of just under 69MB.  While that is an improvement over 85MB (almost 20% less data), there are more efficient ways to store index data than as ASCII.  What‚Äôs important to realise though is that indexing is probably my best way to reference previously played combinations.</p>
<p>When it comes to <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Combinatorial_number_system">Combinatorial Number Systems</a>, mathematics has us covered there too.  In combinatorics, the index of an entry in the finite set of $(n \space choose \space k)$ is called the <em>rank</em>, and finding the index/rank of a k-combination from the set $(n \space choose \space k)$ is called <em>ranking</em>.</p>
<p>Now mathematicians love a good <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Bijection"><em>bijection</em></a> as much as any computer scientist (maybe even more‚Ä¶purist bastards! üòÅ), so with typical swagger mathematics defines the inverse operation as well.  In combinatorics finding the k-combination at a specific index/rank from the set $(n \space choose \space k)$ is called <em>unranking</em>.  At least the naming convention makes implicit sense!</p>
<article class="message message-immersive is-success zodnote">
      <div class="message-body">
        <span class="tag is-success mr-2">ASIDE</span>
        In combinatorial number systems, the order in which k-combinations of the set $(n \space choose \space k)$ are listed is called a <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Lexicographic_order"><em>Lexicographical Order</em></a>. This order must be <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Idempotence">idempotent</a> so that mathematical functions like <em>rank</em> and <em>unrank</em> can be bijections of each other.  We don‚Äôt go into detail about these terms are used in this post, but you will need to understand them if you choose to read wider into the mathematical theories of k-combinations.
      </div>
    </article>
    


<p>Both ranking and unranking operations will be required in my new lotto game generating app.  I‚Äôll need to generate the set of all combinations of $(45 \space choose \space 6)$ using a <em>for loop</em> over all the possible indexes 1 to 8,145,060 (unranking) , and I‚Äôll need to regenerate the index from the combination when I‚Äôm caching the played games to disk (ranking).</p>
<article class="message message-immersive is-primary zodnote">
      <div class="message-body">
        <span class="tag is-primary mr-2">NOTE</span>
        The functions <em>rank</em> and <em>unrank</em> are usually accompanied by an <em>iterator</em> function to calculate the next k-combination in a sequence of $(n \space choose \space k)$.  This function is used to enumerate the entire set, which is more efficient and performant than unranking each combination from scratch using an incrementing index.  For the values of $n$ and $k$ that I‚Äôm using the performance gain isn‚Äôt relevant so I chose to keep the code simple by not implementing it.
      </div>
    </article>
    


<h1 id="Where‚Äôs-Wally"><a href="#Where‚Äôs-Wally" class="headerlink" title="Where‚Äôs Wally?"></a>Where‚Äôs Wally?</h1><p>Knowing what the mathematical terms are is one thing, but finding examples of algorithms implementing them is something else.  For programmers, the most helpful <a target="_blank" rel="noopener" href="https://stackoverflow.com/a/3143197/117797">Stack Overflow contributions</a> on the topic often refer to an old MSDN article that has been retired, and currently available only by downloading a massive PDF archive of MSDN that includes it.  For mathematicians, <a target="_blank" rel="noopener" href="https://math.stackexchange.com/a/1227692/469429">community contributions</a> gloss over much of the reasoning that programmers need to create algorithms.  I suppose in that respect at least the programming and mathematical communities have that in common. üòú</p>
<p>After a lot of searching I concluded that finding algorithms for rank and unrank weren‚Äôt available to read, understand, and use like most solved problems generally are.  In terms of a complete reference of how to think about those mathematical functions, the best example I could find was definitely that retired MSDN article by Dr James McCaffrey, which I‚Äôve dug out and am <a href="/2021/04/10/software-algorithms-for-k-combinations/Generating-the-mth-Lexicographical-Element-of-a-Mathematical-Combination-Dr-James-McCaffrey.pdf">now hosting</a> for posterity and your reading pleasure.</p>
<p>Armed with Dr McCaffrey‚Äôs article in particular, and supported by a host of other mathematical and Wikipedia web pages, I began to decode, reproduce, and create the functions I needed in C#.</p>
<h1 id="Algorithm-Archaeology"><a href="#Algorithm-Archaeology" class="headerlink" title="Algorithm Archaeology"></a>Algorithm Archaeology</h1><p>The article describes the algorithm for <em>unranking</em> a k-combination from it‚Äôs index, as well as providing some C# code to do it.  While the code is welcome and helps to verify the intention of the lengthy description, the description itself is the gold I needed to find in order to resurrect the knowledge.  As for the code, I most often I prefer to re-write code myself to embed the knowledge in my own mind and incorporate language features that didn‚Äôt exist when reference code was written (simplifying it for maintainability and unit testing).  Further, the reference code uses a zero-based system whereas the solution I‚Äôm after requires a one-based system.</p>
<p>After a lot of sweat and experimenting, I managed to distill the algorithm for a one-based unrank function down to the pseudocode below.  The steps required in the algorithm are on the left, while some example working out using the set $(\color{yellowgreen}5 \space choose \space \color{skyblue}3)$ with an index of $\color{yellowgreen}1$ is on the right.  Ignore the unfamiliar terms as I‚Äôll define what they are a little later on in this post.</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Take n and k                     |  n = 5, k = 3,  (n choose k) = 10</span><br><span class="line">Take the index we want           |  1</span><br><span class="line">Move to base 0                   |  index - 1                   = 0</span><br><span class="line">Calculate the dual               |  (n choose k) - 1 - index    = 10 - 1 - 0    = 9</span><br><span class="line">Calculate combinadic of the dual |  combinadic of dual          = combinadic(9) = (4,3,2)</span><br><span class="line">Map to zero-based combination    |  (n-1) - combinadic elements = 4 - (4,3,2)   = (0,1,2)</span><br><span class="line">Add 1 (for base 1)               |  (1,2,3)</span><br></pre></td></tr></tbody></table></figure>
<p class="has-text-centered is-size-6 caption" style="color:#7a7a7a;margin-top:0.3em">The pseudocode for the Unrank function</p>


<p>Let‚Äôs step through the algorithm.</p>
<ol>
<li><strong>Take n and k</strong><br>This simply defines the values of n and k, and <a href="#Calculating-n-choose-k">the value of (n choose k)</a>.</li>
<li><strong>Take the index we want</strong><br>This defines the index/rank of the k-combination we want to retrieve from the set $(n \space choose \space k)$</li>
<li><strong>Move to base 0</strong><br>Converts the system to a zero-based system.  Ignore this step if you already use base zero.</li>
<li><strong>Calculate the dual</strong><br>Calculates the <a href="#The-Dual">dual</a> of the index/rank.</li>
<li><strong>Calculate combinadic of the dual</strong><br>Calculates the <a href="#The-Combinadic">combinadic</a> of the dual.</li>
<li><strong>Map to zero-based combination</strong><br><a href="#Combining-the-Combinadic-and-the-Dual">Maps the combinadic to the k-combination</a> in a zero-based system.</li>
<li><strong>Add 1 (for base 1)</strong><br>Because I want one-based combinations, I add 1 to the result.</li>
</ol>
<p>Fairly simple right?  But what are those undefined terms?  What do they mean?</p>
<h2 id="Calculating-n-choose-k"><a href="#Calculating-n-choose-k" class="headerlink" title="Calculating n choose k"></a>Calculating n choose k</h2><p>As mentioned previously, finding the value of $(n \space choose \space k)$ is a solved problem. In mathematics we use the <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Binomial_coefficient">Binomial Coefficient</a> to calculate this value, and forms of the algorithm are explicitly described in the <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Combination#Example_of_counting_combinations">Combinations Wikipedia page</a>.<br>Here‚Äôs my version, which is based on the second alternate computation method from that page:</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  /   \</span></span><br><span class="line"><span class="comment">// |  n  |  from n</span></span><br><span class="line"><span class="comment">// |     |</span></span><br><span class="line"><span class="comment">// |  k  |  choose k</span></span><br><span class="line"><span class="comment">//  \   /</span></span><br><span class="line"><span class="comment">// Kudos: The 2nd alternate computation of https://en.wikipedia.org/wiki/Combination#Example_of_counting_combinations</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span>Calculates the Binomial Coefficient (n choose k), which is the number of unique k-sized combinations in a set of n elements.<span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;remarks&gt;</span>We divide before multiplying to minimise the chance of overflow.<span class="doctag">&lt;/remarks&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">CalculateBinomialCoefficient</span>(<span class="params"><span class="built_in">int</span> n, <span class="built_in">int</span> k</span>)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (k &gt; n)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">if</span> (k == n)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">double</span> result = n;  <span class="comment">// n choose 1</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">double</span> i = <span class="number">1</span>; i &lt; k; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">var</span> numerator = n - i;</span><br><span class="line">        <span class="built_in">double</span> factor = numerator / (i + <span class="number">1</span>);</span><br><span class="line">        result *= factor;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">int</span>)result;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<article class="message message-immersive is-primary zodnote">
      <div class="message-body">
        <span class="tag is-primary mr-2">NOTE</span>
        I use <code>int</code> because my values for $n$ and $k$ are small enough to stay within the limits of that C# type.  You‚Äôll likely find the maximum value of <code>int</code> will become too limiting <em>very quickly</em> and you‚Äôll likely need types with larger maximums.
      </div>
    </article>
    






<h2 id="The-Dual"><a href="#The-Dual" class="headerlink" title="The Dual"></a>The Dual</h2><p>The <em>Dual</em> (as Dr. McCaffrey calls it) is defined as the <em>value of $(n \space choose \space k)$</em> minus the rank/index of a k-combination.  For example, if we list out all the possible combinations of $(5 \space choose \space 3)$, the index/rank runs from $[1..10]$ and the duals run from $[10..1]$.</p>
<p>While my lottery generator needs to work with a one-based numbers, we‚Äôll list the zero-based equivalent of $(5 \space choose \space 3)$ as well.  This will become important for reference later in this article.</p>
<div class="nolinenumbers">
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">                               (5 choose 3)</span><br><span class="line">       one-based system                          zero-based system</span><br><span class="line">+-------------------------------+        +-------------------------------+</span><br><span class="line">| combination    index    dual  |        | combination    index    dual  |</span><br><span class="line">| -----------    -----    ----  |        | -----------    -----    ----  |</span><br><span class="line">|   (1,2,3)        1       10   |        |   (0,1,2)        0        9   |</span><br><span class="line">|   (1,2,4)        2        9   |        |   (0,1,3)        1        8   |</span><br><span class="line">|   (1,2,5)        3        8   |        |   (0,1,4)        2        7   |</span><br><span class="line">|   (1,3,4)        4        7   |        |   (0,2,3)        3        6   |</span><br><span class="line">|   (1,3,5)        5        6   |        |   (0,2,4)        4        5   |</span><br><span class="line">|   (1,4,5)        6        5   |        |   (0,3,4)        5        4   |</span><br><span class="line">|   (2,3,4)        7        4   |        |   (1,2,3)        6        3   |</span><br><span class="line">|   (2,3,5)        8        3   |        |   (1,2,4)        7        2   |</span><br><span class="line">|   (2,4,5)        9        2   |        |   (1,3,4)        8        1   |</span><br><span class="line">|   (3,4,5)       10        1   |        |   (2,3,4)        9        0   |</span><br><span class="line">+-------------------------------+        +-------------------------------+</span><br></pre></td></tr></tbody></table></figure>
</div>




<h2 id="The-Combinadic"><a href="#The-Combinadic" class="headerlink" title="The Combinadic"></a>The Combinadic</h2><p>In the <em>decimal number system</em> we can represent a number by breaking it down into it‚Äôs <em>unit columns</em>.  For example, the decimal number $\color{yellowgreen}{4096}$ can be broken down as follows:</p>
<p>$$<br>\color{yellowgreen}{4096} =<br>(\color{yellowgreen}4 * \color{skyblue}{1000})+<br>(\color{yellowgreen}0 * \color{skyblue}{100})+<br>(\color{yellowgreen}9 * \color{skyblue}{10})+<br>(\color{yellowgreen}6 * \color{skyblue}1)<br>$$</p>
<p>These unit columns can be represented as a <em>powers of ten</em> with the exponent changing by one for each column; the <em>ones</em> column is $\color{skyblue}{10^0}$, the <em>tens</em> column is $\color{skyblue}{10^1}$, the <em>hundreds</em> column is $\color{skyblue}{10^2}$, and so on.</p>
<p>$$<br>\color{yellowgreen}{4096} =<br>(\color{yellowgreen}4 * \color{skyblue}{10^3})+<br>(\color{yellowgreen}0 * \color{skyblue}{10^2})+<br>(\color{yellowgreen}9 * \color{skyblue}{10^1})+<br>(\color{yellowgreen}6 * \color{skyblue}{10^0})<br>$$</p>
<p>This method for representing numbers can also be used by other numerical systems.  The <em>binary number system</em> can be represented with each unit column as a <em>power of two</em>.  The decimal number $\color{orange}{19}$ is $\color{yellowgreen}{10011}$ in binary, which is broken down as:</p>
<p>$$<br>\color{orange}{19} =<br>\color{yellowgreen}{10011} =<br>(\color{yellowgreen}1 * \color{skyblue}{2^4}) +<br>(\color{yellowgreen}0 * \color{skyblue}{2^3}) +<br>(\color{yellowgreen}0 * \color{skyblue}{2^2}) +<br>(\color{yellowgreen}1 * \color{skyblue}{2^1}) +<br>(\color{yellowgreen}1 * \color{skyblue}{2^0})<br>$$</p>
<p>Now lets consider a <em>combinatorial number system</em>.  In a combinatorial number system we can represent any number by breaking it down into unit columns just like the decimal and binary systems.  However instead of representing each unit column as a power of some base integer, we‚Äôll use <em>binomial coefficients</em>.</p>
<p>For a finite set $(\color{yellowgreen}n \space choose \space \color{skyblue}k)$, the left-most unit column starts with a base of $\color{skyblue}k$, the next column has base $\color{skyblue}{k-1}$, and so on until the final column with $\color{skyblue}k=\color{skyblue}1$.  We can express the representation of any number $\color{orange}z$ of $(\color{yellowgreen}n \space choose \space \color{skyblue}k)$ as:</p>
<p>$$<br>\begin{eqnarray*}<br>&amp;\color{orange}z=<br>(\color{yellowgreen}{c_1} \space choose \space \color{skyblue}k)+<br>(\color{yellowgreen}{c_2} \space choose \space \color{skyblue}{k-1})+ ‚Ä¶ +<br>(\color{yellowgreen}{c_k} \space choose \space \color{skyblue}1)\\<br>&amp;\space\\<br>&amp;\equiv\\<br>&amp;\space\\<br>&amp;\color{orange}z=<br>\bigg(\vcenter{\color{yellowgreen}{c_1} \atop \color{skyblue}k}\bigg)+<br>\bigg(\vcenter{\color{yellowgreen}{c_2} \atop \color{skyblue}{k-1}}\bigg)+ ‚Ä¶ +<br>\bigg(\vcenter{\color{yellowgreen}{c_k} \atop \color{skyblue}1}\bigg)\\<br>\end{eqnarray*}<br>$$</p>
<p>When the values of $\color{yellowgreen}{c_i}$ are chosen such that each $\color{yellowgreen}{c_i}$ is greater than the $\color{yellowgreen}{c_{i+1}}$ following it (or zero if it follows a zero), then the set of all $\color{yellowgreen}{c_i}$ is what Dr McCaffrey calls the <em>Combinadic</em>.</p>
<p>As an explicit example, let‚Äôs look at the representation of the number $\color{orange}7$ in the set of numbers $(\color{yellowgreen}5 \space choose \space \color{skyblue}3)$.</p>
<p>$$<br>\begin{eqnarray*}<br>&amp;\color{orange}7=<br>(\color{yellowgreen}4 \space choose \space \color{skyblue}3)+<br>(\color{yellowgreen}3 \space choose \space \color{skyblue}2)+<br>(\color{yellowgreen}0 \space choose \space \color{skyblue}1)\\<br>&amp;\space\\<br>&amp;\equiv\\<br>&amp;\space\\<br>&amp;\color{orange}{7}=<br>\bigg(\vcenter{\color{yellowgreen}4 \atop \color{skyblue}3}\bigg)+<br>\bigg(\vcenter{\color{yellowgreen}3 \atop \color{skyblue}2}\bigg)+<br>\bigg(\vcenter{\color{yellowgreen}0 \atop \color{skyblue}1}\bigg)\\<br>&amp;\space\\<br>&amp;\equiv\\<br>&amp;\space\\<br>&amp;\color{orange}{7}=<br>\color{yellowgreen}{4} +<br>\color{yellowgreen}{3} +<br>\color{yellowgreen}{0}\\<br>&amp;\space\\<br>&amp;‚üπ\\<br>&amp;\space\\<br>&amp;combinadic(\color{orange}{7})=<br>(\color{yellowgreen}{4},<br>\color{yellowgreen}{3},<br>\color{yellowgreen}{0})\\<br>\end{eqnarray*}<br>$$</p>
<p>We‚Äôll discuss how to calculate the combinadic of numbers a little later.</p>
<h2 id="Combining-the-Combinadic-and-the-Dual"><a href="#Combining-the-Combinadic-and-the-Dual" class="headerlink" title="Combining the Combinadic and the Dual"></a>Combining the Combinadic and the Dual</h2><p>It turns out the combinadic has a very useful property for working with k-combinations in zero-based combinatorial number systems $(n \space choose \space k)$:  when each $c_i$ of the combinadic of any dual is subtracted from the number $n-1$, it reveals the zero-based k-combination of the rank/index of that dual.</p>
<p>That‚Äôs quite a mind-bender to take in, so here‚Äôs what this property looks like for the complete set of duals in the set $(5 \space choose \space 3)$:</p>
<div class="nolinenumbers">
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">dual                "choose" representation         combinadic    (n-1) - combinadic        rank</span><br><span class="line">----              ---------------------------       ----------   ---------------------      ----</span><br><span class="line">  9  =  4+3+2  =  (4 c 3) + (3 c 2) + (2 c 1)   ‚üπ   (4,3,2)     4 - (4,3,2) = (0,1,2)   ‚â°   0</span><br><span class="line">  8  =  4+3+1  =  (4 c 3) + (3 c 2) + (1 c 1)   ‚üπ   (4,3,1)     4 - (4,3,1) = (0,1,3)   ‚â°   1</span><br><span class="line">  7  =  4+3+0  =  (4 c 3) + (3 c 2) + (0 c 1)   ‚üπ   (4,3,0)     4 - (4,3,0) = (0,1,4)   ‚â°   2</span><br><span class="line">  6  =  4+1+1  =  (4 c 3) + (2 c 2) + (1 c 1)   ‚üπ   (4,2,1)     4 - (4,2,1) = (0,2,3)   ‚â°   3</span><br><span class="line">  5  =  4+1+0  =  (4 c 3) + (2 c 2) + (0 c 1)   ‚üπ   (4,2,0)     4 - (4,2,0) = (0,2,4)   ‚â°   4</span><br><span class="line">  4  =  4+0+0  =  (4 c 3) + (1 c 2) + (0 c 1)   ‚üπ   (4,1,0)     4 - (4,1,0) = (0,3,4)   ‚â°   5</span><br><span class="line">  3  =  1+1+1  =  (3 c 3) + (2 c 2) + (1 c 1)   ‚üπ   (3,2,1)     4 - (3,2,1) = (1,2,3)   ‚â°   6</span><br><span class="line">  2  =  1+1+0  =  (3 c 3) + (2 c 2) + (0 c 1)   ‚üπ   (3,2,0)     4 - (3,2,0) = (1,2,4)   ‚â°   7</span><br><span class="line">  1  =  1+0+0  =  (3 c 3) + (1 c 2) + (0 c 1)   ‚üπ   (3,1,0)     4 - (3,1,0) = (1,3,4)   ‚â°   8</span><br><span class="line">  0  =  0+0+0  =  (2 c 3) + (1 c 2) + (0 c 1)   ‚üπ   (2,1,0)     4 - (2,1,0) = (2,3,4)   ‚â°   9</span><br></pre></td></tr></tbody></table></figure>
</div>

<p><img src="whoa.gif" alt="Yes Ted, its Bodacious."></p>
<p>This means that if we have any rank/index of $(n \space choose \space k)$, we can use the combinadic of the dual of that number to give us the k-combination at that rank/index.  This is only true for zero based combinatorial number systems, but it isn‚Äôt too hard to use a bit of addition and subtraction at key stages to get to a one-based system like I need for my lottery app.</p>
<p>How exactly does the relationship between the combinadic, dual, and $n-1$ produce the k-combinations of $(n \space choose \space k)$?  Dr. McCaffrey doesn‚Äôt explain in his article, and I haven‚Äôt found any explanation in any of my searches across the web.  I‚Äôm sure there is mathematics <em>somewhere</em> to prove this relationship, but I‚Äôve just not found any. ü§∑‚Äç‚ôÄÔ∏è</p>
<h2 id="Calculating-the-Combinadic"><a href="#Calculating-the-Combinadic" class="headerlink" title="Calculating the Combinadic"></a>Calculating the Combinadic</h2><p>Fortunately Dr. McCaffrey <em>does</em> explain how to calculate the combinadic of a number, at least for zero-based systems.  Remember, the definition of the combinadic of a number $\color{orange}z$ satisfies the equation:</p>
<p>$$<br>\color{orange}z=<br>(\color{yellowgreen}{c_1} \space choose \space \color{skyblue}k)+<br>(\color{yellowgreen}{c_2} \space choose \space \color{skyblue}{k-1})+ ‚Ä¶ +<br>(\color{yellowgreen}{c_k} \space choose \space \color{skyblue}1)<br>$$</p>
<p>We need to calculate the values of $\color{yellowgreen}{c_i}$ such that each $\color{yellowgreen}{c_i}$ is greater than the $\color{yellowgreen}{c_{i+1}}$ following it (or zero if it follows a zero).</p>
<p>Let‚Äôs work through the example of $\color{orange}7$ from the set $(\color{yellowgreen}5 \space choose \space \color{skyblue}3)$.</p>
<p>$$<br>\color{orange}7=<br>(\color{yellowgreen}{c_1} \space choose \space \color{skyblue}3)+<br>(\color{yellowgreen}{c_2} \space choose \space \color{skyblue}2)+<br>(\color{yellowgreen}{c_3} \space choose \space \color{skyblue}1)<br>$$</p>
<h3 id="Finding-nbsp-color-yellowgreen-c-1"><a href="#Finding-nbsp-color-yellowgreen-c-1" class="headerlink" title="Finding&nbsp;$\color{yellowgreen}{c_1}$"></a>Finding&nbsp;$\color{yellowgreen}{c_1}$</h3><p>First we look for the largest value of $(\color{yellowgreen}{c_1} \space choose \space \color{skyblue}3)$ that doesn‚Äôt exceed $\color{orange}7$.  We know the maximum number possible will be $(\color{yellowgreen}5 \space choose \space \color{skyblue}3)$, so we work our way down from $\color{yellowgreen}5$ until we find a value $\leq \color{orange}7$.</p>
<p>Now $(\color{yellowgreen}5 \space choose \space \color{skyblue}3) = \color{yellowgreen}{10}$, but $(\color{yellowgreen}4 \space choose \space \color{skyblue}3) = \color{yellowgreen}4$, so we‚Äôve discovered that $\color{yellowgreen}{c_1}=\color{yellowgreen}4$.</p>
<p>$$<br>\begin{eqnarray*}<br>&amp;\color{orange}7=<br>\color{yellowgreen}4+<br>(\color{yellowgreen}{c_2} \space choose \space \color{skyblue}2)+<br>(\color{yellowgreen}{c_3} \space choose \space \color{skyblue}1)\\<br>&amp;\space\\<br>&amp;\equiv\\<br>&amp;\space\\<br>&amp;\color{orange}3=<br>(\color{yellowgreen}{c_2} \space choose \space \color{skyblue}2)+<br>(\color{yellowgreen}{c_3} \space choose \space \color{skyblue}1)<br>\end{eqnarray*}<br>$$</p>
<h3 id="Finding-nbsp-color-yellowgreen-c-2"><a href="#Finding-nbsp-color-yellowgreen-c-2" class="headerlink" title="Finding&nbsp;$\color{yellowgreen}{c_2}$"></a>Finding&nbsp;$\color{yellowgreen}{c_2}$</h3><p>Next we look for the largest value of $(\color{yellowgreen}{c_2} \space choose \space \color{skyblue}2)$ that doesn‚Äôt exceed $\color{orange}3$. We know the maximum number possible will be $(\color{yellowgreen}5 \space choose \space \color{skyblue}2)$, so we work our way down from $\color{yellowgreen}5$ until we find a value $\leq \color{orange}3$.</p>
<p>Now $(\color{yellowgreen}5 \space choose \space \color{skyblue}2) = \color{yellowgreen}{10}$, $(\color{yellowgreen}4 \space choose \space \color{skyblue}3) = \color{yellowgreen}6$, but $(\color{yellowgreen}3 \space choose \space \color{skyblue}2) = \color{yellowgreen}3$, so we‚Äôve discovered that $\color{yellowgreen}{c_2}=\color{yellowgreen}3$.</p>
<p>$$<br>\begin{eqnarray*}<br>&amp;\color{orange}3=<br>\color{yellowgreen}3+<br>(\color{yellowgreen}{c_3} \space choose \space \color{skyblue}1)\\<br>&amp;\space\\<br>&amp;\equiv\\<br>&amp;\space\\<br>&amp;\color{orange}0=<br>(\color{yellowgreen}{c_3} \space choose \space \color{skyblue}1)<br>\end{eqnarray*}<br>$$</p>
<h3 id="Finding-nbsp-color-yellowgreen-c-3"><a href="#Finding-nbsp-color-yellowgreen-c-3" class="headerlink" title="Finding&nbsp;$\color{yellowgreen}{c_3}$"></a>Finding&nbsp;$\color{yellowgreen}{c_3}$</h3><p>There can be only one value for any remaining $\color{yellowgreen}{c_i}$ once we get to $\color{orange}0$, and that‚Äôs $\color{yellowgreen}0$.  So we‚Äôve discovered that $\color{yellowgreen}{c_3}=\color{yellowgreen}0$.</p>
<h3 id="The-Result"><a href="#The-Result" class="headerlink" title="The Result"></a>The Result</h3><p>Now we have all the values of $\color{yellowgreen}{c_i}$ the combinadic is revealed:</p>
<p>$$<br>\begin{eqnarray*}<br>&amp;\color{orange}7=<br>(\color{yellowgreen}4 \space choose \space \color{skyblue}3)+<br>(\color{yellowgreen}3 \space choose \space \color{skyblue}2)+<br>(\color{yellowgreen}0 \space choose \space \color{skyblue}1)\\<br>&amp;\space\\<br>&amp;\equiv\\<br>&amp;\space\\<br>&amp;\color{orange}{7}=<br>\color{yellowgreen}{4} +<br>\color{yellowgreen}{3} +<br>\color{yellowgreen}{0}\\<br>&amp;\space\\<br>&amp;‚üπ\\<br>&amp;\space\\<br>&amp;combinadic(\color{orange}{7})=<br>(\color{yellowgreen}{4},<br>\color{yellowgreen}{3},<br>\color{yellowgreen}{0})\\<br>\end{eqnarray*}<br>$$</p>
<h1 id="Algorithm-for-Unrank"><a href="#Algorithm-for-Unrank" class="headerlink" title="Algorithm for Unrank"></a>Algorithm for Unrank</h1><p>Now that we‚Äôve discussed the theory and defined the terms, lets return to the pseudocode of the unrank function:</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Take n and k                     |  n = 5, k = 3,  (n choose k) = 10</span><br><span class="line">Take the index we want           |  1</span><br><span class="line">Move to base 0                   |  index - 1                   = 0</span><br><span class="line">Calculate the dual               |  (n choose k) - 1 - index    = 10 - 1 - 0    = 9</span><br><span class="line">Calculate combinadic of the dual |  combinadic of dual          = combinadic(9) = (4,3,2)</span><br><span class="line">Map to zero-based combination    |  (n-1) - combinadic elements = 4 - (4,3,2)   = (0,1,2)</span><br><span class="line">Add 1 (for base 1)               |  (1,2,3)</span><br></pre></td></tr></tbody></table></figure>


<p>Things should make complete sense now.  The only thing to note is how I convert my index from one-based to zero-based so I can use Dr. McCaffrey‚Äôs Unrank theory (which is zero-based), and then convert the result from zero-based back to one-based at the end for my one-based lottery generator.</p>
<p>It was relatively simple to code this up in C#.</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span>Returns the k-combination of (n choose k) with the provided rank<span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">int</span>[] <span class="title">Unrank</span>(<span class="params"><span class="built_in">int</span> n, <span class="built_in">int</span> k, <span class="built_in">int</span> rank</span>)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">var</span> dualOfZero = n - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Move to base 0</span></span><br><span class="line">    rank--;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Calculate the dual</span></span><br><span class="line">    <span class="keyword">var</span> dual = n.Choose(k) - <span class="number">1</span> - rank;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Calculate combinadic of the dual</span></span><br><span class="line">    <span class="keyword">var</span> combination = CalculateCombinadic(dual);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; k; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="comment">// Map to zero-based combination</span></span><br><span class="line">        combination[i] = dualOfZero - combination[i];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Add 1 (for base 1)</span></span><br><span class="line">        combination[i] += <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> combination;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> Local Functions</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span>Calculates zero-based array of c such that maxRank = (c1 choose k-1) + (c2 choose k-2) + ... (c[of k-1] choose 1) <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="built_in">int</span>[] <span class="title">CalculateCombinadic</span>(<span class="params"><span class="built_in">int</span> maxRank</span>)</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">var</span> result = <span class="keyword">new</span> <span class="built_in">int</span>[k];</span><br><span class="line">        <span class="keyword">var</span> diminishingRank = maxRank;</span><br><span class="line">        <span class="keyword">var</span> reducingK = k;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; k; i++)</span><br><span class="line">        {</span><br><span class="line">            result[i] = CalculateLargestRankBelowThreshold(n, reducingK, diminishingRank);</span><br><span class="line"></span><br><span class="line">            diminishingRank -= result[i].Choose(reducingK);</span><br><span class="line">            reducingK--;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span>Returns the highest rank of n2 choose k2 that is less than the threshold<span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="built_in">int</span> <span class="title">CalculateLargestRankBelowThreshold</span>(<span class="params"><span class="built_in">int</span> n2, <span class="built_in">int</span> k2, <span class="built_in">int</span> threshold</span>)</span></span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">int</span> i = n2 - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (i.Choose(k2) &gt; threshold)</span><br><span class="line">            i--;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>To run this code you‚Äôll also need my <code>Binomials</code> class defining the binomial coefficient calculation and some extension functions:</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span>Mathematical functions for binomials<span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">Binomials</span></span><br><span class="line">{</span><br><span class="line">    <span class="comment">//  /   \</span></span><br><span class="line">    <span class="comment">// |  n  |  from n</span></span><br><span class="line">    <span class="comment">// |     |</span></span><br><span class="line">    <span class="comment">// |  k  |  choose k</span></span><br><span class="line">    <span class="comment">//  \   /</span></span><br><span class="line">    <span class="comment">// Kudos: https://en.wikipedia.org/wiki/Combination#Example_of_counting_combinations</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span>Calculates the Binomial Coefficient (n choose k), which is the number of unique k-sized combinations in a set of n elements.<span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;remarks&gt;</span>We divide before multiplying to minimise the chance of overflow.<span class="doctag">&lt;/remarks&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">CalculateBinomialCoefficient</span>(<span class="params"><span class="built_in">int</span> n, <span class="built_in">int</span> k</span>)</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">if</span> (k &gt; n)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (k == n)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">double</span> result = n;  <span class="comment">// n choose 1</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">double</span> i = <span class="number">1</span>; i &lt; k; i++)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">var</span> numerator = n - i;</span><br><span class="line">            <span class="built_in">double</span> factor = numerator / (i + <span class="number">1</span>);</span><br><span class="line">            result *= factor;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (<span class="built_in">int</span>)result;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span>/ Extensions</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span>Returns the number (n) choose k<span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Choose</span>(<span class="params"><span class="keyword">this</span> <span class="built_in">int</span> n, <span class="built_in">int</span> k</span>)</span> =&gt; </span><br><span class="line">        CalculateBinomialCoefficient(n, k);</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span>Calculates the number of unique combinations of size k from n numbers (k-combination)<span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">CountUniqueCombinationsOfSize</span>(<span class="params"><span class="keyword">this</span> <span class="built_in">int</span> n, <span class="built_in">int</span> k</span>)</span> =&gt; </span><br><span class="line">        CalculateBinomialCoefficient(n, k);</span><br></pre></td></tr></tbody></table></figure>





<h1 id="Algorithm-for-Rank"><a href="#Algorithm-for-Rank" class="headerlink" title="Algorithm for Rank"></a>Algorithm for Rank</h1><p>It took me weeks of research, analysis, and prototyping to get to this point, so I was excited when I finally had working code to calculate the Unrank of $(n \space choose \space k)$.  Next I needed to find an algorithm for the <em>rank</em> function of $(n \space choose \space k)$.  Surely the information I needed was right alongside the theory for <em>unrank</em>, right?</p>
<p>My excitement quickly faded when I discovered Dr McCaffrey‚Äôs article stopped short of discussing the rank function.  Panic started to set in when I couldn‚Äôt find any code or discussion of how the Rank function works anywhere on the web.  It‚Äôs as though the problem was so well understood that nobody bothered to document it.  I went from having the buzz that comes with success after weeks of hard work to the dread of having to do it all again to create the second, missing algorithm.</p>
<p>Fortunately by this point my senses for Mathematics and Science were completely re-awakened and I remembered that rank and unrank are bijections. That means I should be able to reverse the algorithm for <em>unrank</em> to find the algorithm for <em>rank</em>.</p>
<p>One more time, here‚Äôs the pseudocode for <em>unrank</em>:</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Take n and k                     |  n = 5, k = 3,  (n choose k) = 10</span><br><span class="line">Take the index we want           |  1</span><br><span class="line">Move to base 0                   |  index - 1                   = 0</span><br><span class="line">Calculate the dual               |  (n choose k) - 1 - index    = 10 - 1 - 0    = 9</span><br><span class="line">Calculate combinadic of the dual |  combinadic of dual          = combinadic(9) = (4,3,2)</span><br><span class="line">Map to zero-based combination    |  (n-1) - combinadic elements = 4 - (4,3,2)   = (0,1,2)</span><br><span class="line">Add 1 (for base 1)               |  (1,2,3)</span><br></pre></td></tr></tbody></table></figure>
<p class="has-text-centered is-size-6 caption" style="color:#7a7a7a;margin-top:0.3em">Pseudocode for the Rank algorithm, one final time</p>


<p>Reversing order we get the pseudocode for <em>rank</em>:</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Take n and k                     |  n = 5, k = 3,    (n choose k = 10)</span><br><span class="line">Take a combination               |  (1,2,3)</span><br><span class="line">Take 1 (for base 0)              |  (0,1,2)</span><br><span class="line">Map to combinadic                |  (n-1) - combination elements = 4 - (0,1,2)  = (4,3,2)</span><br><span class="line">Calculate dual from combinadic   |  (4 c 3) + (3 c 2) + (2 c 1)  = 4 + 3 + 2    = 9</span><br><span class="line">Calculate index from dual        |  (n c k) - 1 - dual of cmbdic = 10 - 1 - 9   = 0</span><br><span class="line">Add 1 (for base 1)               |  1</span><br></pre></td></tr></tbody></table></figure>
<p class="has-text-centered is-size-6 caption" style="color:#7a7a7a;margin-top:0.3em">Pseudocode for the Unrank algorithm</p>


<p>Coding this is even easier; there‚Äôs no need to calculate the combinadic using binomial coefficients because we deconstruct it from the combination provided and the value of $n-1$.  Everything plays out using addition and subtraction:</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span>Returns the rank of the provided k-combination<span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">Rank</span>(<span class="params"><span class="built_in">int</span> n, <span class="built_in">int</span> k, <span class="built_in">int</span>[] combination</span>)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">var</span> dualOfZero = n - <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">new</span> <span class="built_in">int</span>[k];</span><br><span class="line">    combination.CopyTo(result, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> dualOfCombinadic = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> reducingK = k;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; k; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="comment">// Take 1 (for base 0)</span></span><br><span class="line">        result[i] -= <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Map to combinadic</span></span><br><span class="line">        result[i] = dualOfZero - result[i];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Calculate dual of combinadic (by accumulation)</span></span><br><span class="line">        dualOfCombinadic += result[i].Choose(reducingK);</span><br><span class="line">        reducingK--;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Calculate the dual</span></span><br><span class="line">    <span class="keyword">var</span> dual = n.Choose(k) - <span class="number">1</span> - dualOfCombinadic;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add 1 (for base 1)</span></span><br><span class="line">    dual++;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dual;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>




<h1 id="Return-of-the-King"><a href="#Return-of-the-King" class="headerlink" title="Return of the King"></a>Return of the King</h1><p>Finally I had what I needed; algorithms for rank and unrank and I could get on with building my lottery generator‚Ä¶except I didn‚Äôt get on with it, at least not yet.  When I coded the pseudocode I had aligned my code with each step of the pseudocode to ensure I was doing it right (note how the code comments line up with the pseudocode).  Now that I had an executable version of the algorithm, I could see a few places where refactoring was clearly in order; preventing the Unrank function from looping through $k$ twice for example.</p>
<p>If I was going to refactor for more performance I should write some performance tests to measure the change in execution speed for the original and refactored functions.  It was time to bust out my old friend <a target="_blank" rel="noopener" href="https://benchmarkdotnet.org/">BenchmarkDotNet</a>.</p>
<p>If you‚Äôve been following my blog you may remember this old friend from my <a href="/2017/12/10/measuring-csharp-perf-with-benchmarkdotnet/">first blog post</a> back in 2017.  In the years since BenchmarkDotNet has gone from strength to strength and is now the most widely used performance measuring tool in history. Microsoft use it extensively, for example, to prevent performance regression and drive performance improvements out of the unified .NET platform.  The benefits of that effort have resulted in some amazing performance gains, to the point where C# is <em>faster</em> than C++ in many aspects.  That‚Äôs an incredible outcome.</p>
<p>Last time I used BenchmarkDotNet I stayed within the confounds of <a target="_blank" rel="noopener" href="https://www.linqpad.net/">LINQPad</a>.  This time I already had my lottery generator app already up and running somewhat in <a target="_blank" rel="noopener" href="https://visualstudio.microsoft.com/">Visual Studio</a> so it made sense to continue using it there.  I refactored my Rank and Unrank algorithms into a <code>CombinatorialNumberSystem</code> class for consumption, which had the added benefit of simplifying how I handle values of <code>n</code> and <code>k</code>, and allowing the up-front calculation of write-once variables such as the <code>dualOfZero</code>.</p>
<p>Next I created a new <code>FastCombinatorialNumberSystem</code> class that removed that second $k$ loop and reduced the mathematics of rebasing between zero to one, effectively merging a few pseudocode steps together.  This simplified the code a lot and it now reads like real code.</p>
<p>Pushing both implementations of Rank through some performance tests shows a significant performance boost:</p>
<p><img src="benchmarkdotnet-rank.jpg" alt="Results from running Rank through BenchmarkDotNet"></p>
<p>As you can see I ran $(5 \space choose \space 3)$, $(45 \space choose \space 6)$, and $(100 \space choose \space 6)$ through both implementations to give the algorithms varying degrees of workout. For Rank, the vanilla <code>CombinatorialNumberSystem</code> averaged less than 54 nanoseconds to compete each calculation, but the <code>FastCombinatorialNumberSystem</code> was 43% faster on average and took less than half the memory.  What a great payoff for just a little bit of refactoring!</p>
<p>The results for Unrank, on the other hand, were even more surprising:</p>
<p><img src="benchmarkdotnet-unrank.jpg" alt="Results from running UnRank through BenchmarkDotNet"></p>
<p>While the <code>FastCombinatorialNumberSystem</code> does perform better as expected, it‚Äôs less than 2% faster and uses the same amount of memory. I‚Äôm calling that statistically insignificant; a surprising result given this is where I removed that double loop over $k$ and expected a big boost.  Perhaps the magicians of compilation-time code optimisation did the work for me and came up with essentially the same code as my refactored version.  This demonstrates the value of measuring your code for <em>actual</em> performance gains because here I was <em>perceiving</em> and <em>expecting</em> a big boost when there wasn‚Äôt any.</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>Hopefully this post covers everything you need as a software engineer to understand the mathematics of k-combinations and provide usable algorithms for it.  I‚Äôve stuck the code for both my regular and fast combinatorial number systems, as well as the benchmarking program that runs them, up on a Github Gist.</p>
<a class="gallery-item" style="color:#7a7a7a" href="https://gist.github.com/ZodmanPerth/00c3360d9d047d0d426a1c1874194b74" target="_blank" rel="external">
  <img src="github-gist.jpg" style="display:block;margin:0 auto 0 auto;height:7.8em;object-fit:contain">
  <p class="has-text-centered is-size-6 caption" style="color:#7a7a7a;margin-top:0.5em;padding-bottom:1em">See all the code on my Github Gist</p>
  </a>




<p>Don‚Äôt forget I‚Äôm also hosting Dr McCaffrey‚Äôs original MSDN article (due to it disappearing off the web with MSDN being shut down).  The link for that is below.</p>
<article class="message is-link" style="margin-top: 1.3em"><div class="message-body" style="color:#3273dc">		<p style="font-size: 0.8em;margin-bottom: 0.5em;">REHOSTED MSDN ARTICLE</p>
<div class="columns" style="overflow:auto">
	<div class="column is-narrow">
		<a href="/2021/04/10/software-algorithms-for-k-combinations/Generating-the-mth-Lexicographical-Element-of-a-Mathematical-Combination-Dr-James-McCaffrey.pdf" target="_blank">Generating the mth Lexicographical Element of a Mathematical Combination by Dr James McCaffrey</a><br>
	</div>
</div>
</div>
</article>









</div><div class="article-licensing box"><div class="licensing-title"><p>Software Algorithms for k-combinations</p><p><a href="https://www.redperegrine.net/2021/04/10/software-algorithms-for-k-combinations/">https://www.redperegrine.net/2021/04/10/software-algorithms-for-k-combinations/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Carl Scarlett</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2021-04-10</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2021-08-28</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/benchmarkdotnet/">BenchmarkDotNet</a><a class="link-muted mr-2" rel="tag" href="/tags/algorithms/">Algorithms</a><a class="link-muted mr-2" rel="tag" href="/tags/mathematics/">Mathematics</a><a class="link-muted mr-2" rel="tag" href="/tags/github-gist/">GitHub Gist</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/08/25/red-peregrine-2-0/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Red Peregrine 2.0</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/04/25/building-a-pause-menu-part-4/"><span class="level-item">Building a Pause Menu - Part 4</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://www.redperegrine.net/2021/04/10/software-algorithms-for-k-combinations/';
            this.page.identifier = '2021/04/10/software-algorithms-for-k-combinations/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'http-www-redperegrine-net' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://www.gravatar.com/avatar/78e9bc2dd2c2726ff6cd3891fd9dd4bc?s=128" alt="Carl Scarlett"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Carl Scarlett</p><p class="is-size-6 is-block">Designer, Developer, Dreamer, Doer</p><p class="is-size-6 is-flex justify-content-center is-location"><i class="fas fa-map-marker-alt mr-1"></i><span>Perth, Western Australia</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">13</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">21</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">23</p></a></div></div></nav><div class="level"><a class="level-item button follow-button is-primary is-rounded" href="https://twitter.com/ZodmanPerth" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button link-button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ZodmanPerth"><i class="fab fa-github"></i></a><a class="level-item button link-button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/ZodmanPerth"><i class="fab fa-twitter"></i></a><a class="level-item button link-button is-transparent is-marginless" target="_blank" rel="noopener" title="LinkedIn" href="https://www.linkedin.com/in/carlscarlett/"><i class="fab fa-linkedin"></i></a><a class="level-item button link-button is-transparent is-marginless" target="_blank" rel="noopener" title="YouTube" href="https://www.youtube.com/user/ZodmanPerth"><i class="fab fa-youtube"></i></a><a class="level-item button link-button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Index</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Introduction"><span class="level-left"><span class="level-item">1</span><span class="level-item">Introduction</span></span></a></li><li><a class="level is-mobile" href="#How-it-Started"><span class="level-left"><span class="level-item">2</span><span class="level-item">How it Started</span></span></a></li><li><a class="level is-mobile" href="#New-Superstitions"><span class="level-left"><span class="level-item">3</span><span class="level-item">New Superstitions</span></span></a></li><li><a class="level is-mobile" href="#Another-Numbers-Game"><span class="level-left"><span class="level-item">4</span><span class="level-item">Another Numbers Game</span></span></a></li><li><a class="level is-mobile" href="#Can-You-Smell-What-The-Math-Is-Cooking"><span class="level-left"><span class="level-item">5</span><span class="level-item">Can You Smell What The Math Is Cooking?</span></span></a></li><li><a class="level is-mobile" href="#Where‚Äôs-Wally"><span class="level-left"><span class="level-item">6</span><span class="level-item">Where‚Äôs Wally?</span></span></a></li><li><a class="level is-mobile" href="#Algorithm-Archaeology"><span class="level-left"><span class="level-item">7</span><span class="level-item">Algorithm Archaeology</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Calculating-n-choose-k"><span class="level-left"><span class="level-item">7.1</span><span class="level-item">Calculating n choose k</span></span></a></li><li><a class="level is-mobile" href="#The-Dual"><span class="level-left"><span class="level-item">7.2</span><span class="level-item">The Dual</span></span></a></li><li><a class="level is-mobile" href="#The-Combinadic"><span class="level-left"><span class="level-item">7.3</span><span class="level-item">The Combinadic</span></span></a></li><li><a class="level is-mobile" href="#Combining-the-Combinadic-and-the-Dual"><span class="level-left"><span class="level-item">7.4</span><span class="level-item">Combining the Combinadic and the Dual</span></span></a></li><li><a class="level is-mobile" href="#Calculating-the-Combinadic"><span class="level-left"><span class="level-item">7.5</span><span class="level-item">Calculating the Combinadic</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Finding-nbsp-color-yellowgreen-c-1"><span class="level-left"><span class="level-item">7.5.1</span><span class="level-item">Finding¬†$\color{yellowgreen}{c_1}$</span></span></a></li><li><a class="level is-mobile" href="#Finding-nbsp-color-yellowgreen-c-2"><span class="level-left"><span class="level-item">7.5.2</span><span class="level-item">Finding¬†$\color{yellowgreen}{c_2}$</span></span></a></li><li><a class="level is-mobile" href="#Finding-nbsp-color-yellowgreen-c-3"><span class="level-left"><span class="level-item">7.5.3</span><span class="level-item">Finding¬†$\color{yellowgreen}{c_3}$</span></span></a></li><li><a class="level is-mobile" href="#The-Result"><span class="level-left"><span class="level-item">7.5.4</span><span class="level-item">The Result</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#Algorithm-for-Unrank"><span class="level-left"><span class="level-item">8</span><span class="level-item">Algorithm for Unrank</span></span></a></li><li><a class="level is-mobile" href="#Algorithm-for-Rank"><span class="level-left"><span class="level-item">9</span><span class="level-item">Algorithm for Rank</span></span></a></li><li><a class="level is-mobile" href="#Return-of-the-King"><span class="level-left"><span class="level-item">10</span><span class="level-item">Return of the King</span></span></a></li><li><a class="level is-mobile" href="#Conclusion"><span class="level-left"><span class="level-item">11</span><span class="level-item">Conclusion</span></span></a></li></ul></div></div><script src="/js/toc.js" defer></script></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><figure class="media-left"><a class="image" href="/2021/08/25/red-peregrine-2-0/"><img src="/2021/08/25/red-peregrine-2-0/thumb.jpg" alt="Red Peregrine 2.0"></a></figure><div class="media-content"><p class="date"><time dateTime="2021-08-24T23:35:28.000Z">2021-08-25</time></p><p class="title"><a href="/2021/08/25/red-peregrine-2-0/">Red Peregrine 2.0</a></p><p class="categories"><a href="/categories/zodproj/">zodproj</a> / <a href="/categories/hexo/">hexo</a> / <a href="/categories/hexo/icarus/">icarus</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2021/04/10/software-algorithms-for-k-combinations/"><img src="/2021/04/10/software-algorithms-for-k-combinations/thumb.jpg" alt="Software Algorithms for k-combinations"></a></figure><div class="media-content"><p class="date"><time dateTime="2021-04-09T23:42:02.000Z">2021-04-10</time></p><p class="title"><a href="/2021/04/10/software-algorithms-for-k-combinations/">Software Algorithms for k-combinations</a></p><p class="categories"><a href="/categories/zodproj/">zodproj</a> / <a href="/categories/tests/">tests</a> / <a href="/categories/tests/performance/">performance</a> / <a href="/categories/mathematics/">mathematics</a> / <a href="/categories/mathematics/k-combinations/">k-combinations</a> / <a href="/categories/algorithms/">algorithms</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2020/04/25/building-a-pause-menu-part-4/"><img src="/2020/04/25/building-a-pause-menu-part-4/palacio-80x80.jpg" alt="Building a Pause Menu - Part 4"></a></figure><div class="media-content"><p class="date"><time dateTime="2020-03-25T00:56:12.000Z">2020-03-25</time></p><p class="title"><a href="/2020/04/25/building-a-pause-menu-part-4/">Building a Pause Menu - Part 4</a></p><p class="categories"><a href="/categories/gamedev/">gamedev</a> / <a href="/categories/gamedev/indiedev/">indiedev</a> / <a href="/categories/godot/">godot</a> / <a href="/categories/zodproj/">zodproj</a> / <a href="/categories/series/">series</a> / <a href="/categories/series/pausemenu/">PauseMenu</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2020/03/15/building-a-pause-menu-part-3/"><img src="/2020/03/15/building-a-pause-menu-part-3/guillaume-840x420.jpg" alt="Building a Pause Menu - Part 3"></a></figure><div class="media-content"><p class="date"><time dateTime="2020-03-15T02:29:49.000Z">2020-03-15</time></p><p class="title"><a href="/2020/03/15/building-a-pause-menu-part-3/">Building a Pause Menu - Part 3</a></p><p class="categories"><a href="/categories/gamedev/">gamedev</a> / <a href="/categories/gamedev/indiedev/">indiedev</a> / <a href="/categories/godot/">godot</a> / <a href="/categories/zodproj/">zodproj</a> / <a href="/categories/series/">series</a> / <a href="/categories/series/pausemenu/">PauseMenu</a> / <a href="/categories/design/">design</a> / <a href="/categories/design/process/">process</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2019/12/27/building-a-pause-menu-part-2/"><img src="/2019/12/27/building-a-pause-menu-part-2/living-with-elephants-foundation-300x300.jpg" alt="Building a Pause Menu - Part 2"></a></figure><div class="media-content"><p class="date"><time dateTime="2019-12-27T08:17:50.000Z">2019-12-27</time></p><p class="title"><a href="/2019/12/27/building-a-pause-menu-part-2/">Building a Pause Menu - Part 2</a></p><p class="categories"><a href="/categories/gamedev/">gamedev</a> / <a href="/categories/gamedev/indiedev/">indiedev</a> / <a href="/categories/godot/">godot</a> / <a href="/categories/zodproj/">zodproj</a> / <a href="/categories/series/">series</a> / <a href="/categories/series/pausemenu/">PauseMenu</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">August 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">April 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">March 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/12/"><span class="level-start"><span class="level-item">December 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/11/"><span class="level-start"><span class="level-item">November 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/09/"><span class="level-start"><span class="level-item">September 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/08/"><span class="level-start"><span class="level-item">August 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/05/"><span class="level-start"><span class="level-item">May 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/03/"><span class="level-start"><span class="level-item">March 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/12/"><span class="level-start"><span class="level-item">December 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/algorithms/"><span class="level-start"><span class="level-item">algorithms</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/design/"><span class="level-start"><span class="level-item">design</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/design/process/"><span class="level-start"><span class="level-item">process</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/developer/"><span class="level-start"><span class="level-item">developer</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/developer/flow/"><span class="level-start"><span class="level-item">flow</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/developer/productivity/"><span class="level-start"><span class="level-item">productivity</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/gamedev/"><span class="level-start"><span class="level-item">gamedev</span></span><span class="level-end"><span class="level-item tag">10</span></span></a><ul><li><a class="level is-mobile" href="/categories/gamedev/gameengine/"><span class="level-start"><span class="level-item">gameengine</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/gamedev/indiedev/"><span class="level-start"><span class="level-item">indiedev</span></span><span class="level-end"><span class="level-item tag">9</span></span></a><ul><li><a class="level is-mobile" href="/categories/gamedev/indiedev/gameengine/"><span class="level-start"><span class="level-item">gameengine</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/godot/"><span class="level-start"><span class="level-item">godot</span></span><span class="level-end"><span class="level-item tag">8</span></span></a><ul><li><a class="level is-mobile" href="/categories/godot/gdscript/"><span class="level-start"><span class="level-item">gdscript</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/hexo/"><span class="level-start"><span class="level-item">hexo</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/hexo/icarus/"><span class="level-start"><span class="level-item">icarus</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/mathematics/"><span class="level-start"><span class="level-item">mathematics</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/mathematics/k-combinations/"><span class="level-start"><span class="level-item">k-combinations</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/series/"><span class="level-start"><span class="level-item">series</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/series/pausemenu/"><span class="level-start"><span class="level-item">PauseMenu</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/tests/"><span class="level-start"><span class="level-item">tests</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/tests/performance/"><span class="level-start"><span class="level-item">performance</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/zodproj/"><span class="level-start"><span class="level-item">zodproj</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/algorithms/"><span class="tag">Algorithms</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/benchmarkdotnet/"><span class="tag">BenchmarkDotNet</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/blog/"><span class="tag">Blog</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/c/"><span class="tag">C#</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/design/"><span class="tag">Design</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gdscript/"><span class="tag">GDScript</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gui/"><span class="tag">GUI</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/game-maker/"><span class="tag">Game Maker</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gameblog/"><span class="tag">GameBlog</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/github-gist/"><span class="tag">GitHub Gist</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/godot/"><span class="tag">Godot</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">Hexo</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/icarus/"><span class="tag">Icarus</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linqpad/"><span class="tag">LINQPad</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/msbuild/"><span class="tag">MSBuild</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mathematics/"><span class="tag">Mathematics</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/menu/"><span class="tag">Menu</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sensor/"><span class="tag">Sensor</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/uwp/"><span class="tag">UWP</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unity/"><span class="tag">Unity</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unreal/"><span class="tag">Unreal</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/visual-studio/"><span class="tag">Visual Studio</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/win2d/"><span class="tag">Win2d</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://godotengine.org/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Godot</span></span><span class="level-right"><span class="level-item tag">godotengine.org</span></span></a></li><li><a class="level is-mobile" href="https://github.com/Microsoft/Win2D" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Win2D</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li><li><a class="level is-mobile" href="https://github.com/dotnet/BenchmarkDotNet" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">BenchmarkDotNet</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li><li><a class="level is-mobile" href="https://www.linqpad.net/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">LINQPad</span></span><span class="level-right"><span class="level-item tag">www.linqpad.net</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/personal-blog/logo.svg" alt="Red Peregrine" height="28"></a><p class="is-size-7"><span>&copy; 2021 Carl Scarlett</span>¬†¬†Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>¬†&amp;¬†<a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br>[<a href="https://github.com/ZodmanPerth/hexo-theme-icarus" target="_blank" rel="noopener">Modified</a> by Carl Scarlett]<br><span id="busuanzi_container_site_uv">Visited by <span id="busuanzi_value_site_uv">0</span> users</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="What are you looking for?"></div><a class="searchbox-close" href="javascript:;">√ó</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"What are you looking for?","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>